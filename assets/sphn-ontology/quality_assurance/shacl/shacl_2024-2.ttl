@prefix chop: <https://biomedit.ch/rdf/sphn-resource/chop/> .
@prefix constraints: <https://biomedit.ch/rdf/sphn-schema-constraints/sphn#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix eco: <http://purl.obolibrary.org/obo/ECO_> .
@prefix edam: <http://edamontology.org/> .
@prefix efo: <http://www.ebi.ac.uk/efo/EFO_> .
@prefix emdn: <https://biomedit.ch/rdf/sphn-resource/emdn/> .
@prefix geno: <http://purl.obolibrary.org/obo/GENO_> .
@prefix icd-10-gm: <https://biomedit.ch/rdf/sphn-resource/icd-10-gm/> .
@prefix obi: <http://purl.obolibrary.org/obo/OBI_> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix snomed: <http://snomed.info/id/> .
@prefix so: <http://purl.obolibrary.org/obo/SO_> .
@prefix sphn: <https://biomedit.ch/rdf/sphn-schema/sphn#> .
@prefix sphn-atc: <https://biomedit.ch/rdf/sphn-resource/atc/> .
@prefix sphn-individual: <https://biomedit.ch/rdf/sphn-schema/sphn/individual#> .
@prefix sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/> .
@prefix ucum: <https://biomedit.ch/rdf/sphn-resource/ucum/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

constraints: a owl:Ontology ;
    dcterms:created "2024-05-02"^^xsd:date ;
    dcterms:license <https://creativecommons.org/licenses/by/4.0/> ;
    rdfs:comment "Generated by the the SHACLer tool, that is developed by the SPHN DCC (PHI, SIB Swiss Institute of Bioinformatics): https://git.dcc.sib.swiss/sphn-semantic-framework/sphn-shacl-generator"^^xsd:string ;
    owl:versionIRI <https://biomedit.ch/rdf/sphn-schema/sphn/2024/2> ;
    sh:entailment <http://www.w3.org/ns/entailment/RDFS> .

constraints:OldVersionedCodeHasBeenValid a sh:NodeShape ;
    sh:severity sh:Info ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "The versioned code is not valid anymore due to code meaning change." ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX sphn: <https://biomedit.ch/rdf/sphn-schema/sphn#> 
                         SELECT  ?this (rdf:type as ?path) (?type as ?value)        
                         WHERE {
                             ?this rdf:type ?type .
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX sphn: <https://biomedit.ch/rdf/sphn-schema/sphn#> 
                         PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
                         SELECT  ?this         
                         WHERE {
                             ?type sphn:hasMeaningValidityInCurrent ?validity .
                             FILTER(?validity = false)
                             ?this rdf:type ?type .
                             }""" ] .

constraints:OldVersionedCodeStillValid a sh:NodeShape ;
    sh:severity sh:Info ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "The versioned code is old but still valid" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX sphn: <https://biomedit.ch/rdf/sphn-schema/sphn#> 
                         SELECT  ?this (rdf:type as ?path) (?type as ?value)        
                         WHERE {
                             ?this rdf:type ?type .
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                            PREFIX sphn: <https://biomedit.ch/rdf/sphn-schema/sphn#> 
                            PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
                            SELECT  ?this 
                            WHERE {
                                ?type sphn:hasMeaningValidityInCurrent ?validity .
                                FILTER NOT EXISTS {?type sphn:isCurrent true . }
                                FILTER(?validity = true)
                                ?this rdf:type ?type .
                                }""" ] .

constraints:UnversionedCodeHasMeaningChange a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "The unversioned code you are using has changed its meaning during the time. Please consider using a versioned code." ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX sphn: <https://biomedit.ch/rdf/sphn-schema/sphn#> 
                         SELECT  ?this (rdf:type as ?path) (STR(?codeChange) as ?value)        
                         WHERE {
                             ?type sphn:hasMeaningChangeInHistorization ?codeChange .
                             ?this rdf:type ?type .
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX sphn: <https://biomedit.ch/rdf/sphn-schema/sphn#> 
                         SELECT  ?this         
                         WHERE {
                             ?type sphn:hasMeaningChangeInHistorization ?codeChange .
                             ?this rdf:type ?type .
                             }""" ] .

constraints:sphnAccessDevice a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:105789008 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTypeCode ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasProductCode ],
        [ sh:class sphn:Software ;
            sh:minCount 0 ;
            sh:path sphn:hasSoftware ] ;
    sh:targetClass sphn:AccessDevice .

constraints:sphnAccessDevicePresence a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AccessDevice ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasMedicalDevice ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasInsertionPoint ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRestingPoint ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:AccessDevicePresence .

constraints:sphnAccessDevicePresence_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AccessDevicePresence-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AccessDevicePresence-.*$"))
                             }""" ] ;
    sh:targetClass sphn:AccessDevicePresence .

constraints:sphnAccessDevice_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:AccessDevice .

constraints:sphnAccessDevice_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AccessDevice-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AccessDevice-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:AccessDevice .

constraints:sphnAdministrativeCase a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIdentifier ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasAdmissionDateTime ],
        [ sh:class sphn:Location ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOriginLocation ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:Location ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDischargeLocation ],
        [ sh:class sphn:CareHandling ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCareHandling ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDischargeDateTime ] ;
    sh:targetClass sphn:AdministrativeCase .

constraints:sphnAdministrativeCase_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AdministrativeCase-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AdministrativeCase-.*$"))
                             }""" ] ;
    sh:targetClass sphn:AdministrativeCase .

constraints:sphnAdministrativeSex a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:248152002 ] [ sh:class snomed:32570681000036106 ] [ sh:class snomed:248153007 ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/248152002>, <http://snomed.info/id/32570681000036106>, <http://snomed.info/id/248153007> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:AdministrativeSex .

constraints:sphnAdministrativeSex_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AdministrativeSex-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AdministrativeSex-.*$"))
                             }""" ] ;
    sh:targetClass sphn:AdministrativeSex .

constraints:sphnAdverseEvent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:AdverseEvent_consequences ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasConsequences ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOnsetDateTime ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasSeverityCode ],
        [ sh:class sphn:AdverseEvent_outcome ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOutcome ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIntervention ],
        [ sh:class sphn:Code ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:targetClass sphn:AdverseEvent .

constraints:sphnAdverseEvent_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:AdverseEvent .

constraints:sphnAdverseEvent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AdverseEvent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AdverseEvent-.*$"))
                             }""" ] ;
    sh:targetClass sphn:AdverseEvent .

constraints:sphnAdverseEvent_consequences a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:Death sphn-individual:PermanentDamageOrDisability sphn-individual:NoneOfTheConsequencesMentioned sphn-individual:TemporarilySeriousImpactMedicallyImportant sphn-individual:HospitalisationOrProlongation sphn-individual:LifeThreatening sphn-individual:CongenitalAbnormality ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:AdverseEvent_consequences .

constraints:sphnAdverseEvent_outcome a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:NotRecovered sphn-individual:Fatal sphn-individual:Recovered sphn-individual:Recovering sphn-individual:RecoveringWithSequelae ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:AdverseEvent_outcome .

constraints:sphnAge a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasQuantity ) ;
    sh:property [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasQuantity ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class ucum:d ] [ sh:class ucum:h ] [ sh:class ucum:mo ] [ sh:class ucum:min ] [ sh:class ucum:wk ] [ sh:class ucum:a ] ) ;
            sh:path ( sphn:hasQuantity sphn:hasUnit sphn:hasCode ) ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDeterminationDateTime ] ;
    sh:targetClass sphn:Age .

constraints:sphnAge_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Age-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Age-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Age .

constraints:sphnAllergen a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn-atc:ATC ] [ sh:class snomed:138875005 ] ) ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:Allergen .

constraints:sphnAllergen_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Allergen-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Allergen-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Allergen .

constraints:sphnAllergy a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Allergen ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAllergen ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:723510000 ] [ sh:class snomed:723511001 ] [ sh:class snomed:415684004 ] [ sh:class snomed:410605003 ] ) ;
            sh:path sphn:hasVerificationStatusCode ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasLastReactionDateTime ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:782197009 ] [ sh:class snomed:609328004 ] ) ;
            sh:path sphn:hasReactionTypeCode ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasFirstRecordDateTime ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:723505004 ] [ sh:class snomed:723509005 ] [ sh:class snomed:723507007 ] ) ;
            sh:path sphn:hasSeverityCode ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasVerificationStatusCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasVerificationStatusCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/723510000>, <http://snomed.info/id/723511001>, <http://snomed.info/id/415684004>, <http://snomed.info/id/410605003> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/723505004>, <http://snomed.info/id/723509005>, <http://snomed.info/id/723507007> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasReactionTypeCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasReactionTypeCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/782197009>, <http://snomed.info/id/609328004> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:Allergy .

constraints:sphnAllergyEpisode a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class snomed:404684003 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasManifestationCode ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:410592001 ] [ sh:class snomed:415684004 ] [ sh:class snomed:410605003 ] ) ;
            sh:path sphn:hasCertaintyCode ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:6736007 ] [ sh:class snomed:24484000 ] [ sh:class snomed:255604002 ] ) ;
            sh:path sphn:hasSeverityCode ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDuration ],
        [ sh:class sphn:Allergen ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasAllergen ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:Exposure ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasExposure ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/6736007>, <http://snomed.info/id/24484000>, <http://snomed.info/id/255604002> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasExposure, instances of sphn:TobaccoExposure are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasExposure> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasExposure>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TobaccoExposure>))
                         }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCertaintyCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCertaintyCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/410592001>, <http://snomed.info/id/415684004>, <http://snomed.info/id/410605003> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:AllergyEpisode .

constraints:sphnAllergyEpisode_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AllergyEpisode-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AllergyEpisode-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCertaintyCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCertaintyCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasManifestationCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasManifestationCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:AllergyEpisode .

constraints:sphnAllergy_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Allergy-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Allergy-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSeverityCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasReactionTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasReactionTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasVerificationStatusCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasVerificationStatusCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Allergy .

constraints:sphnAntimicrobialSusceptibilityLabTest a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:AntimicrobialSusceptibilityResult ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Substance ] [ sh:class sphn:Drug ] ) ;
            sh:path sphn:hasChemicalAgent ],
        [ sh:class sphn:LabAnalyzer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasInstrument ],
        [ sh:class snomed:14788002 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:LabAnalyzer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTestKit ] ;
    sh:targetClass sphn:AntimicrobialSusceptibilityLabTest .

constraints:sphnAntimicrobialSusceptibilityLabTestEvent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:Isolate ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSample ],
        [ sh:class sphn:AntimicrobialSusceptibilityLabTest ;
            sh:minCount 1 ;
            sh:path sphn:hasLabTest ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasReportDateTime ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ] ;
    sh:targetClass sphn:AntimicrobialSusceptibilityLabTestEvent .

constraints:sphnAntimicrobialSusceptibilityLabTestEvent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AntimicrobialSusceptibilityLabTestEvent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AntimicrobialSusceptibilityLabTestEvent-.*$"))
                             }""" ] ;
    sh:targetClass sphn:AntimicrobialSusceptibilityLabTestEvent .

constraints:sphnAntimicrobialSusceptibilityLabTest_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AntimicrobialSusceptibilityLabTest-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AntimicrobialSusceptibilityLabTest-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:AntimicrobialSusceptibilityLabTest .

constraints:sphnAntimicrobialSusceptibilityResult a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:1255965005 ] [ sh:class snomed:131196009 ] [ sh:class snomed:30714006 ] ) ;
            sh:path sphn:hasCode ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:ReferenceRange ] [ sh:class sphn:ReferenceValue ] ) ;
            sh:path sphn:hasNumericalReference ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStringValue ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStandardGuideline ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/1255965005>, <http://snomed.info/id/131196009>, <http://snomed.info/id/30714006> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:AntimicrobialSusceptibilityResult .

constraints:sphnAntimicrobialSusceptibilityResult_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AntimicrobialSusceptibilityResult-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AntimicrobialSusceptibilityResult-.*$"))
                             }""" ] ;
    sh:targetClass sphn:AntimicrobialSusceptibilityResult .

constraints:sphnAssay a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class obi:0000070 ] [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:SampleProcessing ] [ sh:class sphn:LibraryPreparation ] ) ;
            sh:path sphn:hasPredecessor ],
        [ sh:class sphn:StandardOperatingProcedure ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStandardOperatingProcedure ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Sample ] [ sh:class sphn:Isolate ] [ sh:class sphn:TumorSpecimen ] ) ;
            sh:path sphn:hasSample ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIdentifier ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:AdministrativeCase ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:DataFile ] [ sh:class sphn:TimeSeriesDataFile ] ) ;
            sh:path sphn:hasDataFile ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> .
                    }
                }""" ] .

constraints:sphnAssay_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> .
                    }
                }""" ] .

constraints:sphnAssay_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Assay-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Assay-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Assay> .
                    }
                }""" ] .

constraints:sphnAssessment a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:AssessmentComponent ;
            sh:minCount 0 ;
            sh:path sphn:hasComponent ],
        [ sh:class snomed:254291000 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:AssessmentResult ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasResult ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasName ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Assessment> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Assessment> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Assessment> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Assessment> .
                    }
                }""" ] .

constraints:sphnAssessmentComponent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:363787002 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCode ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasName ],
        [ sh:class sphn:AssessmentResult ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasResult ] ;
    sh:targetClass sphn:AssessmentComponent .

constraints:sphnAssessmentComponent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AssessmentComponent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AssessmentComponent-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:AssessmentComponent .

constraints:sphnAssessmentEvent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:TumorStageAssessment ] [ sh:class sphn:Assessment ] [ sh:class sphn:TumorGradeAssessment ] ) ;
            sh:path sphn:hasAssessment ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#AssessmentEvent> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#AssessmentEvent> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#AssessmentEvent> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#AssessmentEvent> .
                    }
                }""" ] .

constraints:sphnAssessmentEvent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AssessmentEvent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AssessmentEvent-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#AssessmentEvent> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#AssessmentEvent> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#AssessmentEvent> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#AssessmentEvent> .
                    }
                }""" ] .

constraints:sphnAssessmentResult a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStringValue ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:AssessmentResult .

constraints:sphnAssessmentResult_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:AssessmentResult .

constraints:sphnAssessmentResult_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-AssessmentResult-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-AssessmentResult-.*$"))
                             }""" ] ;
    sh:targetClass sphn:AssessmentResult .

constraints:sphnAssessment_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Assessment-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Assessment-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Assessment> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Assessment> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Assessment> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Assessment> .
                    }
                }""" ] .

constraints:sphnBilledDiagnosis a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:BilledDiagnosis_rank ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRank ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class icd-10-gm:ICD-10-GM ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:Age ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectAge ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ] ;
    sh:targetClass sphn:BilledDiagnosis .

constraints:sphnBilledDiagnosis_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BilledDiagnosis-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BilledDiagnosis-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BilledDiagnosis .

constraints:sphnBilledDiagnosis_rank a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:Complementary sphn-individual:Principal sphn-individual:Secondary ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:BilledDiagnosis_rank .

constraints:sphnBilledProcedure a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:class chop:CHOP ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:BilledProcedure_rank ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRank ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Intent ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIntent ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:BilledProcedure .

constraints:sphnBilledProcedure_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BilledProcedure-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BilledProcedure-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BilledProcedure .

constraints:sphnBilledProcedure_rank a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:Principal sphn-individual:Supplementary ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:BilledProcedure_rank .

constraints:sphnBiobanksample a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Sample ] [ sh:class sphn:Isolate ] [ sh:class sphn:TumorSpecimen ] ) ;
            sh:path sphn:hasSample ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasIdentifier ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasBiobankName ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ] ;
    sh:targetClass sphn:Biobanksample .

constraints:sphnBiobanksample_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Biobanksample-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Biobanksample-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Biobanksample .

constraints:sphnBirth a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:Country ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCountry ],
        [ sh:class snomed:118215003 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDeliveryModeCode ],
        [ sh:class sphn:MedicalDevice ;
            sh:minCount 0 ;
            sh:path sphn:hasMedicalDevice ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:GestationalAgeAtBirth ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasGestationalAge ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:BirthDate ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDate ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasMedicalDevice, instances of sphn:AccessDevice, sphn:LabAnalyzer, sphn:Implant are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AccessDevice>, <https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>, <https://biomedit.ch/rdf/sphn-schema/sphn#Implant>))
                         }""" ] ;
    sh:targetClass sphn:Birth .

constraints:sphnBirthDate a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:gDay ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDay ],
        [ sh:datatype xsd:gMonth ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMonth ],
        [ sh:datatype xsd:time ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:gYear ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasYear ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:Comparator ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasComparator ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:targetClass sphn:BirthDate .

constraints:sphnBirthDate_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BirthDate-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BirthDate-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BirthDate .

constraints:sphnBirth_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Birth-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Birth-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasDeliveryModeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDeliveryModeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Birth .

constraints:sphnBloodPressure a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasSystolicPressure sphn:hasDiastolicPressure sphn:hasMeanPressure ) ;
    sh:property [ sh:class ucum:mmsblHgsbr ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasDiastolicPressure sphn:hasUnit sphn:hasCode ) ],
        [ sh:class ucum:mmsblHgsbr ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasMeanPressure sphn:hasUnit sphn:hasCode ) ],
        [ sh:class sphn:TimeSeriesDataFile ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataFile ],
        [ sh:class ucum:mmsblHgsbr ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasSystolicPressure sphn:hasUnit sphn:hasCode ) ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDiastolicPressure ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSystolicPressure ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMeanPressure ] ;
    sh:targetClass sphn:BloodPressure .

constraints:sphnBloodPressureMeasurement a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasBodySite ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Implant ] [ sh:class sphn:MedicalDevice ] ) ;
            sh:path sphn:hasMedicalDevice ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:68367000 ] [ sh:class snomed:40983000 ] [ sh:class snomed:8205005 ] [ sh:class snomed:344001 ] [ sh:class snomed:113257007 ] [ sh:class snomed:7569003 ] ) ;
            sh:path ( sphn:hasBodySite sphn:hasCode ) ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:716777001 ] [ sh:class snomed:46973005 ] ) ;
            sh:path sphn:hasMethodCode ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:BloodPressure ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasMedicalDevice, instances of sphn:AccessDevice, sphn:LabAnalyzer are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AccessDevice>, <https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>))
                         }""" ] ;
    sh:targetClass sphn:BloodPressureMeasurement .

constraints:sphnBloodPressureMeasurement_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this ("<https://biomedit.ch/rdf/sphn-schema/sphn#hasBodySite>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>" as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasBodySite>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BloodPressureMeasurement-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BloodPressureMeasurement-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BloodPressureMeasurement .

constraints:sphnBloodPressure_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BloodPressure-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BloodPressure-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BloodPressure .

constraints:sphnBodyHeight a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataDetermination ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataDetermination ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasQuantity ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ] ;
    sh:targetClass sphn:BodyHeight .

constraints:sphnBodyHeightMeasurement a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:BodyHeight ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:class snomed:128927009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMethodCode ],
        [ sh:class sphn:MedicalDevice ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMedicalDevice ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasMedicalDevice, instances of sphn:AccessDevice, sphn:LabAnalyzer, sphn:Implant are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AccessDevice>, <https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>, <https://biomedit.ch/rdf/sphn-schema/sphn#Implant>))
                         }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:BodyHeightMeasurement .

constraints:sphnBodyHeightMeasurement_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BodyHeightMeasurement-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BodyHeightMeasurement-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BodyHeightMeasurement .

constraints:sphnBodyHeight_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BodyHeight-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BodyHeight-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BodyHeight .

constraints:sphnBodyMassIndex a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasQuantity ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class ucum:kgperm2 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path ( sphn:hasQuantity sphn:hasUnit sphn:hasCode ) ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasQuantity ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDeterminationDateTime ] ;
    sh:targetClass sphn:BodyMassIndex .

constraints:sphnBodyMassIndex_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BodyMassIndex-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BodyMassIndex-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BodyMassIndex .

constraints:sphnBodyPosition a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class snomed:9851009 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:BodyPosition .

constraints:sphnBodyPosition_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BodyPosition-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BodyPosition-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BodyPosition .

constraints:sphnBodySite a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Laterality ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasLaterality ],
        [ sh:class snomed:123037004 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:BodySite .

constraints:sphnBodySite_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BodySite-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BodySite-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BodySite .

constraints:sphnBodySurfaceArea a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasQuantity ) ;
    sh:property [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasQuantity ],
        [ sh:class ucum:m2 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path ( sphn:hasQuantity sphn:hasUnit sphn:hasCode ) ],
        [ sh:class sphn:BodySurfaceArea_calculationMethod ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCalculationMethod ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDeterminationDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ] ;
    sh:targetClass sphn:BodySurfaceArea .

constraints:sphnBodySurfaceArea_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BodySurfaceArea-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BodySurfaceArea-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BodySurfaceArea .

constraints:sphnBodySurfaceArea_calculationMethod a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:Other sphn-individual:DuBois sphn-individual:Mosteller ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:BodySurfaceArea_calculationMethod .

constraints:sphnBodyTemperature a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:TimeSeriesDataFile ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataFile ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ] ;
    sh:targetClass sphn:BodyTemperature .

constraints:sphnBodyTemperatureMeasurement a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Implant ] [ sh:class sphn:MedicalDevice ] ) ;
            sh:path sphn:hasMedicalDevice ],
        [ sh:class sphn:BodyTemperature ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class snomed:128927009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMethodCode ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasMedicalDevice, instances of sphn:AccessDevice, sphn:LabAnalyzer are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AccessDevice>, <https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>))
                         }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:BodyTemperatureMeasurement .

constraints:sphnBodyTemperatureMeasurement_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BodyTemperatureMeasurement-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BodyTemperatureMeasurement-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BodyTemperatureMeasurement .

constraints:sphnBodyTemperature_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BodyTemperature-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BodyTemperature-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BodyTemperature .

constraints:sphnBodyWeight a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataDetermination ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataDetermination ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasQuantity ] ;
    sh:targetClass sphn:BodyWeight .

constraints:sphnBodyWeightMeasurement a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:128927009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMethodCode ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:class sphn:MedicalDevice ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMedicalDevice ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:BodyWeight ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasMedicalDevice, instances of sphn:AccessDevice, sphn:LabAnalyzer, sphn:Implant are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AccessDevice>, <https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>, <https://biomedit.ch/rdf/sphn-schema/sphn#Implant>))
                         }""" ] ;
    sh:targetClass sphn:BodyWeightMeasurement .

constraints:sphnBodyWeightMeasurement_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BodyWeightMeasurement-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BodyWeightMeasurement-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BodyWeightMeasurement .

constraints:sphnBodyWeight_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-BodyWeight-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-BodyWeight-.*$"))
                             }""" ] ;
    sh:targetClass sphn:BodyWeight .

constraints:sphnCardiacIndex a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasQuantity ) ;
    sh:property [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDeterminationDateTime ],
        [ sh:class ucum:Lperminperm2 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path ( sphn:hasQuantity sphn:hasUnit sphn:hasCode ) ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasQuantity ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class snomed:63075001 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMethodCode ] ;
    sh:targetClass sphn:CardiacIndex .

constraints:sphnCardiacIndex_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-CardiacIndex-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-CardiacIndex-.*$"))
                             }""" ] ;
    sh:targetClass sphn:CardiacIndex .

constraints:sphnCardiacOutput a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:class sphn:TimeSeriesDataFile ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataFile ] ;
    sh:targetClass sphn:CardiacOutput .

constraints:sphnCardiacOutputMeasurement a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:CardiacOutput ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class snomed:128927009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMethodCode ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Implant ] [ sh:class sphn:MedicalDevice ] ) ;
            sh:path sphn:hasMedicalDevice ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasMedicalDevice, instances of sphn:AccessDevice, sphn:LabAnalyzer are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AccessDevice>, <https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>))
                         }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:CardiacOutputMeasurement .

constraints:sphnCardiacOutputMeasurement_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-CardiacOutputMeasurement-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-CardiacOutputMeasurement-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:CardiacOutputMeasurement .

constraints:sphnCardiacOutput_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-CardiacOutput-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-CardiacOutput-.*$"))
                             }""" ] ;
    sh:targetClass sphn:CardiacOutput .

constraints:sphnCareHandling a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:394656005 ] [ sh:class snomed:304903009 ] [ sh:class snomed:371883000 ] ) ;
            sh:path sphn:hasTypeCode ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/394656005>, <http://snomed.info/id/304903009>, <http://snomed.info/id/371883000> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:CareHandling .

constraints:sphnCareHandling_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-CareHandling-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-CareHandling-.*$"))
                             }""" ] ;
    sh:targetClass sphn:CareHandling .

constraints:sphnChromosomalLocation a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Code ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartCytobandCode ],
        [ sh:class sphn:Chromosome ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasChromosome ],
        [ sh:class sphn:Code ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasEndCytobandCode ] ;
    sh:targetClass sphn:ChromosomalLocation .

constraints:sphnChromosomalLocation_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ChromosomalLocation-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ChromosomalLocation-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ChromosomalLocation .

constraints:sphnChromosome a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:91272006 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:Chromosome .

constraints:sphnChromosome_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Chromosome-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Chromosome-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Chromosome .

constraints:sphnCircumference a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasQuantity ] ;
    sh:targetClass sphn:Circumference .

constraints:sphnCircumferenceMeasurement a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasBodySite ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class snomed:128927009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMethodCode ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:class sphn:Circumference ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:33673004 ] [ sh:class snomed:29836001 ] [ sh:class snomed:69536005 ] [ sh:class snomed:45048000 ] ) ;
            sh:path ( sphn:hasBodySite sphn:hasCode ) ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:MedicalDevice ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMedicalDevice ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasMedicalDevice, instances of sphn:AccessDevice, sphn:LabAnalyzer, sphn:Implant are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AccessDevice>, <https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>, <https://biomedit.ch/rdf/sphn-schema/sphn#Implant>))
                         }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasBodySite>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasBodySite>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/33673004>, <http://snomed.info/id/29836001>, <http://snomed.info/id/69536005>, <http://snomed.info/id/45048000> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasBodySite> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasBodySite>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <https://biomedit.ch/rdf/sphn-schema/sphn#BodySite> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:CircumferenceMeasurement .

constraints:sphnCircumferenceMeasurement_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-CircumferenceMeasurement-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-CircumferenceMeasurement-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this ("<https://biomedit.ch/rdf/sphn-schema/sphn#hasBodySite>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>" as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasBodySite>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:CircumferenceMeasurement .

constraints:sphnCircumference_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Circumference-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Circumference-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Circumference .

constraints:sphnCivilStatus a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:14012001 ] [ sh:class snomed:266945001 ] [ sh:class snomed:87915002 ] [ sh:class snomed:20295000 ] [ sh:class snomed:125681006 ] [ sh:class snomed:33553000 ] ) ;
            sh:path sphn:hasCode ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEventDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/14012001>, <http://snomed.info/id/266945001>, <http://snomed.info/id/87915002>, <http://snomed.info/id/20295000>, <http://snomed.info/id/125681006>, <http://snomed.info/id/33553000> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:CivilStatus .

constraints:sphnCivilStatus_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-CivilStatus-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-CivilStatus-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:CivilStatus .

constraints:sphnCode a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasIdentifier ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCodingSystemAndVersion ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasName ] ;
    sh:targetClass sphn:Code .

constraints:sphnCode_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Code .

constraints:sphnComparator a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:GreaterThan sphn-individual:LessThan sphn-individual:LessThanOrEqual sphn-individual:GreaterThanOrEqual ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:Comparator .

constraints:sphnConsent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:69658003 ] [ sh:class snomed:410529002 ] [ sh:class snomed:60132005 ] ) ;
            sh:path sphn:hasTypeCode ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTemplateIdentifier ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:385645004 ] [ sh:class snomed:225795001 ] [ sh:class snomed:443390004 ] ) ;
            sh:path sphn:hasStatusCode ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/69658003>, <http://snomed.info/id/410529002>, <http://snomed.info/id/60132005> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStatusCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStatusCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/385645004>, <http://snomed.info/id/225795001>, <http://snomed.info/id/443390004> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:Consent .

constraints:sphnConsent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Consent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Consent-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStatusCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStatusCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Consent .

constraints:sphnCopyNumberVariation a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasTotalCopyNumber ) ;
    sh:property [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTotalCopyNumber ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class so:0001742 ] [ sh:class so:0001743 ] ) ;
            sh:path sphn:hasTypeCode ],
        [ sh:class ucum:cblcopycbr ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasTotalCopyNumber sphn:hasUnit sphn:hasCode ) ],
        [ sh:class sphn:Gene ;
            sh:minCount 0 ;
            sh:path sphn:hasAffectedGenomicFeature ],
        [ sh:class sphn:ChromosomalLocation ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasChromosomalLocation ],
        [ sh:class sphn:GenomicPosition ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasGenomicPosition ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://purl.obolibrary.org/obo/SO_0001742>, <http://purl.obolibrary.org/obo/SO_0001743> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:CopyNumberVariation .

constraints:sphnCopyNumberVariation_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:CopyNumberVariation .

constraints:sphnCopyNumberVariation_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-CopyNumberVariation-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-CopyNumberVariation-.*$"))
                             }""" ] ;
    sh:targetClass sphn:CopyNumberVariation .

constraints:sphnCountry a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:223369002 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:Country .

constraints:sphnCountry_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Country-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Country-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Country .

constraints:sphnDataDetermination a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:258090004 ] [ sh:class snomed:263760002 ] [ sh:class snomed:414135002 ] [ sh:class snomed:258104002 ] [ sh:class snomed:87982008 ] ) ;
            sh:path sphn:hasMethodCode ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/258090004>, <http://snomed.info/id/263760002>, <http://snomed.info/id/414135002>, <http://snomed.info/id/258104002>, <http://snomed.info/id/87982008> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:DataDetermination .

constraints:sphnDataDetermination_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-DataDetermination-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-DataDetermination-.*$"))
                             }""" ] ;
    sh:targetClass sphn:DataDetermination .

constraints:sphnDataFile a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasName ],
        [ sh:class sphn:DataFile_encoding ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEncoding ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Hash ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasHash ],
        [ sh:class edam:format_1915 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasFormatCode ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasUniformResourceIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCreationDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#DataFile> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#DataFile> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#DataFile> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#DataFile> .
                    }
                }""" ] .

constraints:sphnDataFile_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-DataFile-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-DataFile-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#DataFile> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#DataFile> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#DataFile> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#DataFile> .
                    }
                }""" ] .

constraints:sphnDataFile_encoding a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:ASCII sphn-individual:ISO88591 sphn-individual:UTF8 sphn-individual:UTF16 ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:DataFile_encoding .

constraints:sphnDataProcessing a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Software ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSoftware ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:StandardOperatingProcedure ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStandardOperatingProcedure ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:DataProcessing ] [ sh:class sphn:Assay ] ) ;
            sh:path sphn:hasPredecessor ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:DataFile ] [ sh:class sphn:TimeSeriesDataFile ] ) ;
            sh:path sphn:hasInput ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:QualityControlMetric ;
            sh:minCount 0 ;
            sh:path sphn:hasQualityControlMetric ],
        [ sh:class sphn:AdministrativeCase ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:DataFile ] [ sh:class sphn:TimeSeriesDataFile ] ) ;
            sh:path sphn:hasOutput ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class edam:operation_0004 ] [ sh:class obi:0200000 ] [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> .
                    }
                }""" ] .

constraints:sphnDataProcessing_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> .
                    }
                }""" ] .

constraints:sphnDataProcessing_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-DataProcessing-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-DataProcessing-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#DataProcessing> .
                    }
                }""" ] .

constraints:sphnDataProvider a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Department ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDepartment ],
        [ sh:class sphn:DataProvider_category ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCategory ],
        [ sh:class sphn:Code ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasInstitutionCode ] ;
    sh:targetClass sphn:DataProvider .

constraints:sphnDataProvider_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-DataProvider-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-DataProvider-.*$"))
                             }""" ] ;
    sh:targetClass sphn:DataProvider .

constraints:sphnDataProvider_category a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:ServiceProvider sphn-individual:HealthInsurance sphn-individual:Pharmacy sphn-individual:FederalOffice sphn-individual:PrivatePractice sphn-individual:ResearchOrganization sphn-individual:ExternalLaboratory sphn-individual:University sphn-individual:Company sphn-individual:Hospital ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:DataProvider_category .

constraints:sphnDataRelease a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasDataProviderInstitute dcterms:conformsTo ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasExtractionDateTime ] ;
    sh:targetClass sphn:DataRelease .

constraints:sphnDataRelease_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-DataRelease-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-DataRelease-.*$"))
                             }""" ] ;
    sh:targetClass sphn:DataRelease .

constraints:sphnDeath a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasReportDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:419620001 ] [ sh:class icd-10-gm:ICD-10-GM ] ) ;
            sh:path sphn:hasCircumstanceCode ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class icd-10-gm:ICD-10-GM ] [ sh:class snomed:64572001 ] ) ;
            sh:path sphn:hasConditionCode ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:DeathDate ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDate ] ;
    sh:targetClass sphn:Death .

constraints:sphnDeathDate a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:gMonth ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMonth ],
        [ sh:datatype xsd:time ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTime ],
        [ sh:datatype xsd:gYear ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasYear ],
        [ sh:datatype xsd:gDay ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDay ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:targetClass sphn:DeathDate .

constraints:sphnDeathDate_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-DeathDate-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-DeathDate-.*$"))
                             }""" ] ;
    sh:targetClass sphn:DeathDate .

constraints:sphnDeath_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Death-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Death-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasConditionCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasConditionCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCircumstanceCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCircumstanceCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Death .

constraints:sphnDepartment a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasName ] ;
    sh:targetClass sphn:Department .

constraints:sphnDepartment_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Department-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Department-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Department .

constraints:sphnDiagnosis a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Age ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectAge ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> .
                    }
                }""" ] .

constraints:sphnDiagnosis_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> .
                    }
                }""" ] .

constraints:sphnDiagnosis_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Diagnosis-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Diagnosis-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Diagnosis> .
                    }
                }""" ] .

constraints:sphnDrug a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Substance ;
            sh:minCount 0 ;
            sh:path sphn:hasInactiveIngredient ],
        [ sh:class sphn:Substance ;
            sh:minCount 0 ;
            sh:path sphn:hasActiveIngredient ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DrugArticle ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasArticle ] ;
    sh:targetClass sphn:Drug .

constraints:sphnDrugAdministrationEvent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:TimePattern ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTimePattern ],
        [ sh:class sphn:Drug ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDrug ],
        [ sh:class snomed:284009009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrationRouteCode ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:419620001 ] [ sh:class snomed:399307001 ] [ sh:class snomed:441308009 ] [ sh:class snomed:31438003 ] [ sh:class snomed:395007004 ] [ sh:class snomed:74964007 ] [ sh:class snomed:182872003 ] [ sh:class snomed:182845006 ] [ sh:class snomed:182844005 ] [ sh:class snomed:182846007 ] [ sh:class snomed:395009001 ] ) ;
            sh:path sphn:hasReasonToStopCode ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDuration ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasReasonToStopCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasReasonToStopCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/419620001>, <http://snomed.info/id/399307001>, <http://snomed.info/id/441308009>, <http://snomed.info/id/31438003>, <http://snomed.info/id/395007004>, <http://snomed.info/id/74964007>, <http://snomed.info/id/182872003>, <http://snomed.info/id/182845006>, <http://snomed.info/id/182844005>, <http://snomed.info/id/182846007>, <http://snomed.info/id/395009001> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:DrugAdministrationEvent .

constraints:sphnDrugAdministrationEvent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasReasonToStopCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasReasonToStopCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasAdministrationRouteCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasAdministrationRouteCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-DrugAdministrationEvent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-DrugAdministrationEvent-.*$"))
                             }""" ] ;
    sh:targetClass sphn:DrugAdministrationEvent .

constraints:sphnDrugArticle a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:PharmaceuticalDoseForm ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasManufacturedDoseForm ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasName ],
        [ sh:class sphn:Code ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ] ;
    sh:targetClass sphn:DrugArticle .

constraints:sphnDrugArticle_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-DrugArticle-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-DrugArticle-.*$"))
                             }""" ] ;
    sh:targetClass sphn:DrugArticle .

constraints:sphnDrugPrescription a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasFrequency ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasFirstAdministrationDateTime ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:BilledDiagnosis ] [ sh:class sphn:Diagnosis ] [ sh:class sphn:NursingDiagnosis ] [ sh:class sphn:OncologyDiagnosis ] ) ;
            sh:path sphn:hasIndicationToStart ],
        [ sh:class sphn:TimePattern ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTimePattern ],
        [ sh:class snomed:284009009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrationRouteCode ],
        [ sh:class sphn:Drug ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDrug ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasLastAdministrationDateTime ],
        [ sh:class sphn:Intent ;
            sh:minCount 0 ;
            sh:path sphn:hasIntent ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:targetClass sphn:DrugPrescription .

constraints:sphnDrugPrescription_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-DrugPrescription-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-DrugPrescription-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasAdministrationRouteCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasAdministrationRouteCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:DrugPrescription .

constraints:sphnDrug_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Drug-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Drug-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Drug .

constraints:sphnElectrocardiogram a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataFile ;
            sh:minCount 1 ;
            sh:path sphn:hasDataFile ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasDataFile, instances of sphn:TimeSeriesDataFile are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasDataFile> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDataFile>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TimeSeriesDataFile>))
                         }""" ] ;
    sh:targetClass sphn:Electrocardiogram .

constraints:sphnElectrocardiogram_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Electrocardiogram-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Electrocardiogram-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Electrocardiogram .

constraints:sphnElectrocardiographicProcedure a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasSubjectPhysiologicState sphn:hasIntent ) ;
    sh:property [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasNumberOfLeads ],
        [ sh:class sphn:Intent ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIntent ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Electrocardiogram ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOutput ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:360156006 ] [ sh:class snomed:261004008 ] ) ;
            sh:path ( sphn:hasIntent sphn:hasCode ) ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:128975004 ] [ sh:class snomed:128976003 ] ) ;
            sh:path ( sphn:hasSubjectPhysiologicState sphn:hasCode ) ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class snomed:29303009 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:PhysiologicState ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectPhysiologicState ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:BodySite ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/360156006>, <http://snomed.info/id/261004008> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasSubjectPhysiologicState> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSubjectPhysiologicState>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <https://biomedit.ch/rdf/sphn-schema/sphn#PhysiologicState> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <https://biomedit.ch/rdf/sphn-schema/sphn#Intent> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasSubjectPhysiologicState>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSubjectPhysiologicState>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/128975004>, <http://snomed.info/id/128976003> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:ElectrocardiographicProcedure .

constraints:sphnElectrocardiographicProcedure_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this ("<https://biomedit.ch/rdf/sphn-schema/sphn#hasSubjectPhysiologicState>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>" as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSubjectPhysiologicState>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this ("<https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>" as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ElectrocardiographicProcedure-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ElectrocardiographicProcedure-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ElectrocardiographicProcedure .

constraints:sphnExcludedDisorder a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasRecordDateTime ],
        [ sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:ExcludedDisorder .

constraints:sphnExcludedDisorder_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:ExcludedDisorder .

constraints:sphnExcludedDisorder_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ExcludedDisorder-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ExcludedDisorder-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ExcludedDisorder .

constraints:sphnExposure a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:138875005 ;
            sh:minCount 0 ;
            sh:path sphn:hasRouteCode ],
        [ sh:class snomed:138875005 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAgentCode ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class snomed:138875005 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDegreeCode ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDuration ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Exposure> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Exposure> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Exposure> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Exposure> .
                    }
                }""" ] .

constraints:sphnExposure_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasRouteCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasRouteCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasDegreeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDegreeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasAgentCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasAgentCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Exposure-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Exposure-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Exposure> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Exposure> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Exposure> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Exposure> .
                    }
                }""" ] .

constraints:sphnFluidBalance a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasQuantity ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:FluidInputOutput ;
            sh:minCount 0 ;
            sh:path sphn:hasFluidInputOutput ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:FluidBalance .

constraints:sphnFluidBalance_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-FluidBalance-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-FluidBalance-.*$"))
                             }""" ] ;
    sh:targetClass sphn:FluidBalance .

constraints:sphnFluidInputOutput a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasSubstance ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Substance ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubstance ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class snomed:33463005 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path ( sphn:hasSubstance sphn:hasCode ) ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasEndDateTime ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:FluidInputOutput .

constraints:sphnFluidInputOutput_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this ("<https://biomedit.ch/rdf/sphn-schema/sphn#hasSubstance>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>" as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSubstance>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-FluidInputOutput-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-FluidInputOutput-.*$"))
                             }""" ] ;
    sh:targetClass sphn:FluidInputOutput .

constraints:sphnFollowUp a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:VitalStatus ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:386473003 ] [ sh:class snomed:281036007 ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/386473003>, <http://snomed.info/id/281036007> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:FollowUp .

constraints:sphnFollowUp_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-FollowUp-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-FollowUp-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:FollowUp .

constraints:sphnGene a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Transcript ;
            sh:minCount 0 ;
            sh:path sphn:hasTranscript ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:Protein ;
            sh:minCount 0 ;
            sh:path sphn:hasProtein ],
        [ sh:class sphn:Organism ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOrganism ] ;
    sh:targetClass sphn:Gene .

constraints:sphnGenePanel a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataFile ;
            sh:minCount 0 ;
            sh:path sphn:hasDataFile ],
        [ sh:class sphn:Gene ;
            sh:minCount 1 ;
            sh:path sphn:hasFocusGene ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasDataFile, instances of sphn:TimeSeriesDataFile are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasDataFile> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDataFile>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TimeSeriesDataFile>))
                         }""" ] ;
    sh:targetClass sphn:GenePanel .

constraints:sphnGenePanel_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-GenePanel-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-GenePanel-.*$"))
                             }""" ] ;
    sh:targetClass sphn:GenePanel .

constraints:sphnGene_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:Gene .

constraints:sphnGene_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Gene-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Gene-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Gene .

constraints:sphnGeneticVariation a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:ChromosomalLocation ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasChromosomalLocation ],
        [ sh:class sphn:GenomicPosition ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasGenomicPosition ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#GeneticVariation> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#GeneticVariation> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#GeneticVariation> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#GeneticVariation> .
                    }
                }""" ] .

constraints:sphnGeneticVariation_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-GeneticVariation-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-GeneticVariation-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#GeneticVariation> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#GeneticVariation> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#GeneticVariation> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#GeneticVariation> .
                    }
                }""" ] .

constraints:sphnGenomicDeletion a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasSequenceLength ) ;
    sh:property [ sh:class sphn:GenomicPosition ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasGenomicPosition ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSequenceLength ],
        [ sh:class sphn:ChromosomalLocation ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasChromosomalLocation ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasGenomicSequence ],
        [ sh:class ucum:cblbase_paircbr ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasSequenceLength sphn:hasUnit sphn:hasCode ) ] ;
    sh:targetClass sphn:GenomicDeletion .

constraints:sphnGenomicDeletion_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-GenomicDeletion-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-GenomicDeletion-.*$"))
                             }""" ] ;
    sh:targetClass sphn:GenomicDeletion .

constraints:sphnGenomicInsertion a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasSequenceLength ) ;
    sh:property [ sh:class sphn:ChromosomalLocation ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasChromosomalLocation ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasGenomicSequence ],
        [ sh:class sphn:GenomicPosition ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasGenomicPosition ],
        [ sh:class ucum:cblbase_paircbr ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasSequenceLength sphn:hasUnit sphn:hasCode ) ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSequenceLength ] ;
    sh:targetClass sphn:GenomicInsertion .

constraints:sphnGenomicInsertion_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-GenomicInsertion-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-GenomicInsertion-.*$"))
                             }""" ] ;
    sh:targetClass sphn:GenomicInsertion .

constraints:sphnGenomicPosition a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:GenomicPosition_coordinateConvention ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCoordinateConvention ],
        [ sh:class sphn:ReferenceSequence ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasReference ],
        [ sh:datatype xsd:double ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasEnd ],
        [ sh:datatype xsd:double ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStart ] ;
    sh:targetClass sphn:GenomicPosition .

constraints:sphnGenomicPosition_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-GenomicPosition-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-GenomicPosition-.*$"))
                             }""" ] ;
    sh:targetClass sphn:GenomicPosition .

constraints:sphnGenomicPosition_coordinateConvention a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:ResidueCoordinates sphn-individual:InterResidueCoordinates ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:GenomicPosition_coordinateConvention .

constraints:sphnGestationalAgeAtBirth a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasQuantity ) ;
    sh:property [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasQuantity ],
        [ sh:class ucum:d ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path ( sphn:hasQuantity sphn:hasUnit sphn:hasCode ) ] ;
    sh:targetClass sphn:GestationalAgeAtBirth .

constraints:sphnGestationalAgeAtBirth_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-GestationalAgeAtBirth-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-GestationalAgeAtBirth-.*$"))
                             }""" ] ;
    sh:targetClass sphn:GestationalAgeAtBirth .

constraints:sphnHash a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStringValue ],
        [ sh:class sphn:Hash_algorithm ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasAlgorithm ] ;
    sh:targetClass sphn:Hash .

constraints:sphnHash_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Hash-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Hash-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Hash .

constraints:sphnHash_algorithm a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:SHA512 sphn-individual:MD5 sphn-individual:SHA256 ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:Hash_algorithm .

constraints:sphnHealthcareEncounter a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:Location ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCurrentLocation ],
        [ sh:class sphn:Location ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOriginLocation ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasIdentifier ],
        [ sh:class sphn:Location ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTargetLocation ],
        [ sh:class sphn:TherapeuticArea ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTherapeuticArea ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:HealthcareEncounter .

constraints:sphnHealthcareEncounter_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-HealthcareEncounter-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-HealthcareEncounter-.*$"))
                             }""" ] ;
    sh:targetClass sphn:HealthcareEncounter .

constraints:sphnHealthcarePrimaryInformationSystem a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class snomed:706593004 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCode ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasName ] ;
    sh:targetClass sphn:HealthcarePrimaryInformationSystem .

constraints:sphnHealthcarePrimaryInformationSystem_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-HealthcarePrimaryInformationSystem-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-HealthcarePrimaryInformationSystem-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:HealthcarePrimaryInformationSystem .

constraints:sphnHeartRate a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:TimeSeriesDataFile ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataFile ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:271636001 ] [ sh:class snomed:61086009 ] ) ;
            sh:path sphn:hasRegularityCode ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasRegularityCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasRegularityCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/271636001>, <http://snomed.info/id/61086009> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:HeartRate .

constraints:sphnHeartRateMeasurement a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:HeartRate ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class snomed:128927009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMethodCode ],
        [ sh:class sphn:PhysiologicState ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectPhysiologicState ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Implant ] [ sh:class sphn:MedicalDevice ] ) ;
            sh:path sphn:hasMedicalDevice ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasMedicalDevice, instances of sphn:AccessDevice, sphn:LabAnalyzer are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AccessDevice>, <https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>))
                         }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:HeartRateMeasurement .

constraints:sphnHeartRateMeasurement_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-HeartRateMeasurement-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-HeartRateMeasurement-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:HeartRateMeasurement .

constraints:sphnHeartRate_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasRegularityCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasRegularityCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-HeartRate-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-HeartRate-.*$"))
                             }""" ] ;
    sh:targetClass sphn:HeartRate .

constraints:sphnHomeAddress a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SwissSocioEconomicPosition ;
            sh:minCount 0 ;
            sh:path sphn:hasSwissSocioEconomicPosition ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:Country ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCountry ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:HomeAddress .

constraints:sphnHomeAddress_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-HomeAddress-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-HomeAddress-.*$"))
                             }""" ] ;
    sh:targetClass sphn:HomeAddress .

constraints:sphnImagingProcedure a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:BodySite ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class snomed:363679005 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:Intent ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIntent ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:ImagingProcedure .

constraints:sphnImagingProcedure_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ImagingProcedure-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ImagingProcedure-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ImagingProcedure .

constraints:sphnImplant a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Software ;
            sh:minCount 0 ;
            sh:path sphn:hasSoftware ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:14106009 ] [ sh:class snomed:40388003 ] ) ;
            sh:path sphn:hasTypeCode ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasProductCode ] ;
    sh:targetClass sphn:Implant .

constraints:sphnImplantPresence a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Implant ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasMedicalDevice ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:ImplantPresence .

constraints:sphnImplantPresence_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ImplantPresence-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ImplantPresence-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ImplantPresence .

constraints:sphnImplant_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:Implant .

constraints:sphnImplant_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Implant-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Implant-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Implant .

constraints:sphnInhaledOxygenConcentration a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasQuantity ) ;
    sh:property [ sh:class ucum:percent ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path ( sphn:hasQuantity sphn:hasUnit sphn:hasCode ) ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:AccessDevice ] [ sh:class sphn:MedicalDevice ] ) ;
            sh:path sphn:hasOxygenEquipment ],
        [ sh:class sphn:DataDetermination ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataDetermination ],
        [ sh:class sphn:DrugAdministrationEvent ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOxygenFlowRate ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasQuantity ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasOxygenEquipment, instances of sphn:LabAnalyzer, sphn:Implant are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasOxygenEquipment> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasOxygenEquipment>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>, <https://biomedit.ch/rdf/sphn-schema/sphn#Implant>))
                         }""" ] ;
    sh:targetClass sphn:InhaledOxygenConcentration .

constraints:sphnInhaledOxygenConcentration_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-InhaledOxygenConcentration-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-InhaledOxygenConcentration-.*$"))
                             }""" ] ;
    sh:targetClass sphn:InhaledOxygenConcentration .

constraints:sphnInsuranceStatus a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:InsuranceStatus_coverageType ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCoverageType ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:InsuranceStatus .

constraints:sphnInsuranceStatus_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-InsuranceStatus-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-InsuranceStatus-.*$"))
                             }""" ] ;
    sh:targetClass sphn:InsuranceStatus .

constraints:sphnInsuranceStatus_coverageType a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:Other sphn-individual:None sphn-individual:Foreign sphn-individual:Private sphn-individual:SemiPrivate sphn-individual:General ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:InsuranceStatus_coverageType .

constraints:sphnIntent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:363675004 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:Intent .

constraints:sphnIntent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Intent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Intent-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Intent .

constraints:sphnInterpretation a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:string ;
            sh:minCount 0 ;
            sh:path sphn:hasStandardGuideline ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:minCount 1 ;
            sh:or ( [ sh:class sphn:SampleProcessing ] [ sh:class sphn:DataDetermination ] [ sh:class sphn:Protein ] [ sh:class sphn:DataProcessing ] [ sh:class sphn:Nationality ] [ sh:class sphn:Result ] [ sh:class sphn:SourceSystem ] [ sh:class sphn:Exposure ] [ sh:class sphn:PharmaceuticalDoseForm ] [ sh:class sphn:Quantity ] [ sh:class sphn:SequencingRun ] [ sh:class sphn:Software ] [ sh:class sphn:ValueSet ] [ sh:class sphn:CivilStatus ] [ sh:class sphn:AllergyEpisode ] [ sh:class sphn:ReferenceValue ] [ sh:class sphn:ImplantPresence ] [ sh:class sphn:Assay ] [ sh:class sphn:Birth ] [ sh:class sphn:Measurement ] [ sh:class sphn:MedicalProcedure ] [ sh:class sphn:PhysiologicState ] [ sh:class sphn:QualityControlMetric ] [ sh:class sphn:BodyPosition ] [ sh:class sphn:Department ] [ sh:class sphn:GestationalAgeAtBirth ] [ sh:class sphn:LabTest ] [ sh:class sphn:Performer ] [ sh:class sphn:GeneticVariation ] [ sh:class sphn:DeathDate ] [ sh:class sphn:ProblemCondition ] [ sh:class sphn:AssessmentComponent ] [ sh:class sphn:DrugPrescription ] [ sh:class sphn:Intent ] [ sh:class sphn:Terminology ] [ sh:class sphn:Drug ] [ sh:class sphn:NutritionIntake ] [ sh:class sphn:GenePanel ] [ sh:class sphn:HealthcareEncounter ] [ sh:class sphn:Code ] [ sh:class sphn:FluidInputOutput ] [ sh:class sphn:Substance ] [ sh:class sphn:AdministrativeSex ] [ sh:class sphn:Sample ] [ sh:class sphn:Allergen ] [ sh:class sphn:LabTestEvent ] [ sh:class sphn:BodySite ] [ sh:class sphn:ReferenceRange ] [ sh:class sphn:SubjectPseudoIdentifier ] [ sh:class sphn:Biobanksample ] [ sh:class sphn:AdministrativeCase ] [ sh:class sphn:MedicalDevice ] [ sh:class sphn:Assessment ] [ sh:class sphn:VariantNotation ] [ sh:class sphn:HomeAddress ] [ sh:class sphn:SwissSocioEconomicPosition ] [ sh:class sphn:TransplantPresence ] [ sh:class sphn:AdverseEvent ] [ sh:class sphn:Hash ] [ sh:class sphn:Diagnosis ] [ sh:class sphn:CareHandling ] [ sh:class sphn:Unit ] [ sh:class sphn:ChromosomalLocation ] [ sh:class sphn:ResuscitationDirective ] [ sh:class sphn:Interpretation ] [ sh:class sphn:AccessDevicePresence ] [ sh:class sphn:CardiacIndex ] [ sh:class sphn:Laterality ] [ sh:class sphn:Country ] [ sh:class sphn:Chromosome ] [ sh:class sphn:Organism ] [ sh:class sphn:AssessmentEvent ] [ sh:class sphn:BirthDate ] [ sh:class sphn:BodySurfaceArea ] [ sh:class sphn:DataProvider ] [ sh:class sphn:InhaledOxygenConcentration ] [ sh:class sphn:Death ] [ sh:class sphn:BodyMassIndex ] [ sh:class sphn:GenomicPosition ] [ sh:class sphn:Gene ] [ sh:class sphn:DrugArticle ] [ sh:class sphn:DataFile ] [ sh:class sphn:StandardOperatingProcedure ] [ sh:class sphn:SourceData ] [ sh:class sphn:TherapeuticArea ] [ sh:class sphn:Age ] [ sh:class sphn:Location ] [ sh:class sphn:Consent ] [ sh:class sphn:SequencingInstrument ] [ sh:class sphn:ExcludedDisorder ] [ sh:class sphn:VariantDescriptor ] [ sh:class sphn:SemanticMapping ] [ sh:class sphn:Transplant ] [ sh:class sphn:FollowUp ] [ sh:class sphn:DataRelease ] [ sh:class sphn:InsuranceStatus ] [ sh:class sphn:Electrocardiogram ] [ sh:class sphn:Allergy ] [ sh:class sphn:FluidBalance ] [ sh:class sphn:HealthcarePrimaryInformationSystem ] [ sh:class sphn:DrugAdministrationEvent ] [ sh:class sphn:ReferenceSequence ] [ sh:class sphn:Transcript ] [ sh:class sphn:TimePattern ] ) ;
            sh:path sphn:hasOutput ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:SampleProcessing ] [ sh:class sphn:DataDetermination ] [ sh:class sphn:Protein ] [ sh:class sphn:DataProcessing ] [ sh:class sphn:Nationality ] [ sh:class sphn:Result ] [ sh:class sphn:SourceSystem ] [ sh:class sphn:Exposure ] [ sh:class sphn:PharmaceuticalDoseForm ] [ sh:class sphn:Quantity ] [ sh:class sphn:SequencingRun ] [ sh:class sphn:Software ] [ sh:class sphn:ValueSet ] [ sh:class sphn:CivilStatus ] [ sh:class sphn:AllergyEpisode ] [ sh:class sphn:ReferenceValue ] [ sh:class sphn:ImplantPresence ] [ sh:class sphn:Assay ] [ sh:class sphn:Birth ] [ sh:class sphn:Measurement ] [ sh:class sphn:MedicalProcedure ] [ sh:class sphn:PhysiologicState ] [ sh:class sphn:QualityControlMetric ] [ sh:class sphn:BodyPosition ] [ sh:class sphn:Department ] [ sh:class sphn:GestationalAgeAtBirth ] [ sh:class sphn:LabTest ] [ sh:class sphn:Performer ] [ sh:class sphn:GeneticVariation ] [ sh:class sphn:DeathDate ] [ sh:class sphn:ProblemCondition ] [ sh:class sphn:AssessmentComponent ] [ sh:class sphn:DrugPrescription ] [ sh:class sphn:Intent ] [ sh:class sphn:Terminology ] [ sh:class sphn:Drug ] [ sh:class sphn:NutritionIntake ] [ sh:class sphn:GenePanel ] [ sh:class sphn:HealthcareEncounter ] [ sh:class sphn:Code ] [ sh:class sphn:FluidInputOutput ] [ sh:class sphn:Substance ] [ sh:class sphn:AdministrativeSex ] [ sh:class sphn:Sample ] [ sh:class sphn:Allergen ] [ sh:class sphn:LabTestEvent ] [ sh:class sphn:BodySite ] [ sh:class sphn:ReferenceRange ] [ sh:class sphn:SubjectPseudoIdentifier ] [ sh:class sphn:Biobanksample ] [ sh:class sphn:AdministrativeCase ] [ sh:class sphn:MedicalDevice ] [ sh:class sphn:Assessment ] [ sh:class sphn:VariantNotation ] [ sh:class sphn:HomeAddress ] [ sh:class sphn:SwissSocioEconomicPosition ] [ sh:class sphn:TransplantPresence ] [ sh:class sphn:AdverseEvent ] [ sh:class sphn:Hash ] [ sh:class sphn:Diagnosis ] [ sh:class sphn:CareHandling ] [ sh:class sphn:Unit ] [ sh:class sphn:ChromosomalLocation ] [ sh:class sphn:ResuscitationDirective ] [ sh:class sphn:Interpretation ] [ sh:class sphn:AccessDevicePresence ] [ sh:class sphn:CardiacIndex ] [ sh:class sphn:Laterality ] [ sh:class sphn:Country ] [ sh:class sphn:Chromosome ] [ sh:class sphn:Organism ] [ sh:class sphn:AssessmentEvent ] [ sh:class sphn:BirthDate ] [ sh:class sphn:BodySurfaceArea ] [ sh:class sphn:DataProvider ] [ sh:class sphn:InhaledOxygenConcentration ] [ sh:class sphn:Death ] [ sh:class sphn:BodyMassIndex ] [ sh:class sphn:GenomicPosition ] [ sh:class sphn:Gene ] [ sh:class sphn:DrugArticle ] [ sh:class sphn:DataFile ] [ sh:class sphn:StandardOperatingProcedure ] [ sh:class sphn:SourceData ] [ sh:class sphn:TherapeuticArea ] [ sh:class sphn:Age ] [ sh:class sphn:Location ] [ sh:class sphn:Consent ] [ sh:class sphn:SequencingInstrument ] [ sh:class sphn:ExcludedDisorder ] [ sh:class sphn:VariantDescriptor ] [ sh:class sphn:SemanticMapping ] [ sh:class sphn:Transplant ] [ sh:class sphn:FollowUp ] [ sh:class sphn:DataRelease ] [ sh:class sphn:InsuranceStatus ] [ sh:class sphn:Electrocardiogram ] [ sh:class sphn:Allergy ] [ sh:class sphn:FluidBalance ] [ sh:class sphn:HealthcarePrimaryInformationSystem ] [ sh:class sphn:DrugAdministrationEvent ] [ sh:class sphn:ReferenceSequence ] [ sh:class sphn:Transcript ] [ sh:class sphn:TimePattern ] ) ;
            sh:path sphn:hasInput ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> .
                    }
                }""" ] .

constraints:sphnInterpretation_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasInput> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasInput> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasInput> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasInput> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasOutput> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasOutput> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasOutput> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasOutput> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> .
                    }
                }""" ] .

constraints:sphnInterpretation_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Interpretation-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Interpretation-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Interpretation> .
                    }
                }""" ] .

constraints:sphnIsolate a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:Sample_fixationType ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasFixationType ],
        [ sh:datatype xsd:anyURI ;
            sh:path sphn:hasSharedIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCollectionDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Sample_primaryContainer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPrimaryContainer ],
        [ sh:datatype xsd:string ;
            sh:minCount 0 ;
            sh:path sphn:hasIdentifier ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:class sphn:Organism ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOrganism ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class snomed:123038009 ;
            sh:minCount 0 ;
            sh:path sphn:hasMaterialTypeCode ] ;
    sh:targetClass sphn:Isolate .

constraints:sphnIsolate_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMaterialTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMaterialTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Isolate-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Isolate-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Isolate .

constraints:sphnLabAnalyzer a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class emdn:EMDN ] ) ;
            sh:path sphn:hasTypeCode ],
        [ sh:class sphn:Software ;
            sh:minCount 0 ;
            sh:path sphn:hasSoftware ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasProductCode ] ;
    sh:targetClass sphn:LabAnalyzer .

constraints:sphnLabAnalyzer_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:LabAnalyzer .

constraints:sphnLabAnalyzer_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-LabAnalyzer-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-LabAnalyzer-.*$"))
                             }""" ] ;
    sh:targetClass sphn:LabAnalyzer .

constraints:sphnLabResult a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStringValue ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:ReferenceRange ] [ sh:class sphn:ReferenceValue ] ) ;
            sh:path sphn:hasNumericalReference ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> .
                    }
                }""" ] .

constraints:sphnLabResult_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> .
                    }
                }""" ] .

constraints:sphnLabResult_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-LabResult-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-LabResult-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#LabResult> .
                    }
                }""" ] .

constraints:sphnLabTest a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:LabResult ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn-loinc:LOINC ] [ sh:class snomed:138875005 ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:LabAnalyzer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTestKit ],
        [ sh:class sphn:LabAnalyzer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasInstrument ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasResult, instances of sphn:AntimicrobialSusceptibilityResult, sphn:MicrobiologyBiomoleculePresenceResult, sphn:MicrobiologyMicroscopyResult, sphn:MicroorganismIdentificationResult are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasResult> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasResult>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AntimicrobialSusceptibilityResult>, <https://biomedit.ch/rdf/sphn-schema/sphn#MicrobiologyBiomoleculePresenceResult>, <https://biomedit.ch/rdf/sphn-schema/sphn#MicrobiologyMicroscopyResult>, <https://biomedit.ch/rdf/sphn-schema/sphn#MicroorganismIdentificationResult>))
                         }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> .
                    }
                }""" ] .

constraints:sphnLabTestEvent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Sample ] [ sh:class sphn:Isolate ] [ sh:class sphn:TumorSpecimen ] ) ;
            sh:path sphn:hasSample ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasReportDateTime ],
        [ sh:class sphn:LabTest ;
            sh:minCount 1 ;
            sh:path sphn:hasLabTest ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasLabTest, instances of sphn:AntimicrobialSusceptibilityLabTest, sphn:MicrobiologyBiomoleculePresenceLabTest, sphn:MicrobiologyMicroscopyLabTest, sphn:MicroorganismIdentificationLabTest are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasLabTest> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasLabTest>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AntimicrobialSusceptibilityLabTest>, <https://biomedit.ch/rdf/sphn-schema/sphn#MicrobiologyBiomoleculePresenceLabTest>, <https://biomedit.ch/rdf/sphn-schema/sphn#MicrobiologyMicroscopyLabTest>, <https://biomedit.ch/rdf/sphn-schema/sphn#MicroorganismIdentificationLabTest>))
                         }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabTestEvent> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabTestEvent> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#LabTestEvent> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#LabTestEvent> .
                    }
                }""" ] .

constraints:sphnLabTestEvent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-LabTestEvent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-LabTestEvent-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabTestEvent> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabTestEvent> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#LabTestEvent> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#LabTestEvent> .
                    }
                }""" ] .

constraints:sphnLabTest_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> .
                    }
                }""" ] .

constraints:sphnLabTest_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-LabTest-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-LabTest-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#LabTest> .
                    }
                }""" ] .

constraints:sphnLaterality a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:66459002 ] [ sh:class snomed:51440002 ] [ sh:class snomed:24028007 ] [ sh:class snomed:7771000 ] ) ;
            sh:path sphn:hasCode ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/66459002>, <http://snomed.info/id/51440002>, <http://snomed.info/id/24028007>, <http://snomed.info/id/7771000> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:Laterality .

constraints:sphnLaterality_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Laterality-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Laterality-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Laterality .

constraints:sphnLibraryPreparation a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:AdministrativeCase ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Sample ] [ sh:class sphn:Isolate ] [ sh:class sphn:TumorSpecimen ] ) ;
            sh:path sphn:hasInput ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class obi:0000711 ] [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Sample ] [ sh:class sphn:Isolate ] ) ;
            sh:path sphn:hasOutput ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasTargetEnrichmentKitCode ],
        [ sh:class sphn:StandardOperatingProcedure ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStandardOperatingProcedure ],
        [ sh:class sphn:QualityControlMetric ;
            sh:minCount 0 ;
            sh:path sphn:hasQualityControlMetric ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIntendedInsertSize ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:SampleProcessing ] [ sh:class sphn:LibraryPreparation ] ) ;
            sh:path sphn:hasPredecessor ],
        [ sh:class sphn:GenePanel ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasGenePanel ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasKitCode ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasOutput, instances of sphn:TumorSpecimen are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasOutput> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasOutput>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TumorSpecimen>))
                         }""" ] ;
    sh:targetClass sphn:LibraryPreparation .

constraints:sphnLibraryPreparation_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasKitCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasKitCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasKitCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasKitCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTargetEnrichmentKitCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTargetEnrichmentKitCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTargetEnrichmentKitCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTargetEnrichmentKitCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:LibraryPreparation .

constraints:sphnLibraryPreparation_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-LibraryPreparation-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-LibraryPreparation-.*$"))
                             }""" ] ;
    sh:targetClass sphn:LibraryPreparation .

constraints:sphnLocation a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasExact ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class snomed:276339004 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasTypeCode ] ;
    sh:targetClass sphn:Location .

constraints:sphnLocation_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Location-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Location-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Location .

constraints:sphnMeasurement a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:class snomed:128927009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMethodCode ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:minCount 1 ;
            sh:or ( [ sh:class sphn:CardiacOutput ] [ sh:class sphn:BodyHeight ] [ sh:class sphn:Circumference ] [ sh:class sphn:BodyWeight ] [ sh:class sphn:OxygenSaturation ] [ sh:class sphn:RespiratoryRate ] [ sh:class sphn:ReferenceInterpretationResult ] [ sh:class sphn:TumorGradeAssessmentResult ] [ sh:class sphn:TumorStageAssessmentResult ] [ sh:class sphn:BloodPressure ] [ sh:class sphn:Result ] [ sh:class sphn:AssessmentResult ] [ sh:class sphn:BodyTemperature ] [ sh:class sphn:HeartRate ] ) ;
            sh:path sphn:hasResult ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Implant ] [ sh:class sphn:MedicalDevice ] ) ;
            sh:path sphn:hasMedicalDevice ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasResult, instances of sphn:LabResult, sphn:VitalStatus, sphn:AntimicrobialSusceptibilityResult, sphn:MicrobiologyBiomoleculePresenceResult, sphn:MicrobiologyMicroscopyResult, sphn:MicroorganismIdentificationResult are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasResult> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasResult>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#LabResult>, <https://biomedit.ch/rdf/sphn-schema/sphn#VitalStatus>, <https://biomedit.ch/rdf/sphn-schema/sphn#AntimicrobialSusceptibilityResult>, <https://biomedit.ch/rdf/sphn-schema/sphn#MicrobiologyBiomoleculePresenceResult>, <https://biomedit.ch/rdf/sphn-schema/sphn#MicrobiologyMicroscopyResult>, <https://biomedit.ch/rdf/sphn-schema/sphn#MicroorganismIdentificationResult>))
                         }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasMedicalDevice, instances of sphn:AccessDevice, sphn:LabAnalyzer are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AccessDevice>, <https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>))
                         }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Measurement> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Measurement> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Measurement> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Measurement> .
                    }
                }""" ] .

constraints:sphnMeasurement_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Measurement-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Measurement-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Measurement> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Measurement> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Measurement> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Measurement> .
                    }
                }""" ] .

constraints:sphnMedicalDevice a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasProductCode ],
        [ sh:class sphn:Software ;
            sh:minCount 0 ;
            sh:path sphn:hasSoftware ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:272181003 ] [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasTypeCode ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> .
                    }
                }""" ] .

constraints:sphnMedicalDevice_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasProductCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> .
                    }
                }""" ] .

constraints:sphnMedicalDevice_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-MedicalDevice-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-MedicalDevice-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalDevice> .
                    }
                }""" ] .

constraints:sphnMedicalProcedure a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:BodySite ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:Intent ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIntent ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> .
                    }
                }""" ] .

constraints:sphnMedicalProcedure_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> .
                    }
                }""" ] .

constraints:sphnMedicalProcedure_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-MedicalProcedure-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-MedicalProcedure-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#MedicalProcedure> .
                    }
                }""" ] .

constraints:sphnMicrobiologyBiomoleculePresenceLabTest a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:LabAnalyzer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTestKit ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Protein ] [ sh:class sphn:Gene ] ) ;
            sh:path sphn:hasTargetMolecule ],
        [ sh:class sphn:MicrobiologyBiomoleculePresenceResult ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn-loinc:LOINC ] [ sh:class snomed:138875005 ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:LabAnalyzer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasInstrument ] ;
    sh:targetClass sphn:MicrobiologyBiomoleculePresenceLabTest .

constraints:sphnMicrobiologyBiomoleculePresenceLabTestEvent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasReportDateTime ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:MicrobiologyBiomoleculePresenceLabTest ;
            sh:minCount 1 ;
            sh:path sphn:hasLabTest ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:Isolate ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSample ] ;
    sh:targetClass sphn:MicrobiologyBiomoleculePresenceLabTestEvent .

constraints:sphnMicrobiologyBiomoleculePresenceLabTestEvent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyBiomoleculePresenceLabTestEvent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyBiomoleculePresenceLabTestEvent-.*$"))
                             }""" ] ;
    sh:targetClass sphn:MicrobiologyBiomoleculePresenceLabTestEvent .

constraints:sphnMicrobiologyBiomoleculePresenceLabTest_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:MicrobiologyBiomoleculePresenceLabTest .

constraints:sphnMicrobiologyBiomoleculePresenceLabTest_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyBiomoleculePresenceLabTest-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyBiomoleculePresenceLabTest-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:MicrobiologyBiomoleculePresenceLabTest .

constraints:sphnMicrobiologyBiomoleculePresenceResult a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:ReferenceRange ] [ sh:class sphn:ReferenceValue ] ) ;
            sh:path sphn:hasNumericalReference ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStringValue ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:260385009 ] [ sh:class snomed:373068000 ] [ sh:class snomed:10828004 ] ) ;
            sh:path sphn:hasCode ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/260385009>, <http://snomed.info/id/373068000>, <http://snomed.info/id/10828004> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:MicrobiologyBiomoleculePresenceResult .

constraints:sphnMicrobiologyBiomoleculePresenceResult_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyBiomoleculePresenceResult-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyBiomoleculePresenceResult-.*$"))
                             }""" ] ;
    sh:targetClass sphn:MicrobiologyBiomoleculePresenceResult .

constraints:sphnMicrobiologyMicroscopyLabTest a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:117259009 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ],
        [ sh:class snomed:37926009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStainingMethodCode ],
        [ sh:class sphn:LabAnalyzer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasInstrument ],
        [ sh:class sphn:MicrobiologyMicroscopyResult ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:class sphn:LabAnalyzer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTestKit ] ;
    sh:targetClass sphn:MicrobiologyMicroscopyLabTest .

constraints:sphnMicrobiologyMicroscopyLabTestEvent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasReportDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Sample ] [ sh:class sphn:Isolate ] ) ;
            sh:path sphn:hasSample ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:MicrobiologyMicroscopyLabTest ;
            sh:minCount 1 ;
            sh:path sphn:hasLabTest ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasSample, instances of sphn:TumorSpecimen are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasSample> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSample>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TumorSpecimen>))
                         }""" ] ;
    sh:targetClass sphn:MicrobiologyMicroscopyLabTestEvent .

constraints:sphnMicrobiologyMicroscopyLabTestEvent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyMicroscopyLabTestEvent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyMicroscopyLabTestEvent-.*$"))
                             }""" ] ;
    sh:targetClass sphn:MicrobiologyMicroscopyLabTestEvent .

constraints:sphnMicrobiologyMicroscopyLabTest_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyMicroscopyLabTest-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyMicroscopyLabTest-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStainingMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStainingMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:MicrobiologyMicroscopyLabTest .

constraints:sphnMicrobiologyMicroscopyResult a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStringValue ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:260385009 ] [ sh:class snomed:373068000 ] [ sh:class snomed:10828004 ] ) ;
            sh:path sphn:hasStainingResultCode ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:ReferenceRange ] [ sh:class sphn:ReferenceValue ] ) ;
            sh:path sphn:hasNumericalReference ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:46998006 ] [ sh:class snomed:57176003 ] [ sh:class snomed:260413007 ] [ sh:class snomed:260396001 ] ) ;
            sh:path sphn:hasCellCountEstimateCode ],
        [ sh:class sphn:MicrobiologyMicroscopyResult_cellOrganization ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCellOrganization ],
        [ sh:class sphn:MicrobiologyMicroscopyResult_cellMorphology ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCellMorphology ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStainingResultCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStainingResultCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/260385009>, <http://snomed.info/id/373068000>, <http://snomed.info/id/10828004> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCellCountEstimateCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCellCountEstimateCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/46998006>, <http://snomed.info/id/57176003>, <http://snomed.info/id/260413007>, <http://snomed.info/id/260396001> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:MicrobiologyMicroscopyResult .

constraints:sphnMicrobiologyMicroscopyResult_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCellCountEstimateCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCellCountEstimateCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStainingResultCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStainingResultCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyMicroscopyResult-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-MicrobiologyMicroscopyResult-.*$"))
                             }""" ] ;
    sh:targetClass sphn:MicrobiologyMicroscopyResult .

constraints:sphnMicrobiologyMicroscopyResult_cellMorphology a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:Round sphn-individual:Filamentous sphn-individual:Other sphn-individual:Spiral sphn-individual:Elongated sphn-individual:RodShaped sphn-individual:Ovoid sphn-individual:CurvedRodShaped ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:MicrobiologyMicroscopyResult_cellMorphology .

constraints:sphnMicrobiologyMicroscopyResult_cellOrganization a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:Multicellular sphn-individual:Unicellular sphn-individual:EntireCell ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:MicrobiologyMicroscopyResult_cellOrganization .

constraints:sphnMicroorganismIdentificationLabTest a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:LabAnalyzer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasInstrument ],
        [ sh:class sphn:LabAnalyzer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTestKit ],
        [ sh:class snomed:19851009 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:MicroorganismIdentificationResult ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ] ;
    sh:targetClass sphn:MicroorganismIdentificationLabTest .

constraints:sphnMicroorganismIdentificationLabTestEvent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:MicroorganismIdentificationLabTest ;
            sh:minCount 1 ;
            sh:path sphn:hasLabTest ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasReportDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Sample ] [ sh:class sphn:Isolate ] ) ;
            sh:path sphn:hasSample ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasSample, instances of sphn:TumorSpecimen are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasSample> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSample>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TumorSpecimen>))
                         }""" ] ;
    sh:targetClass sphn:MicroorganismIdentificationLabTestEvent .

constraints:sphnMicroorganismIdentificationLabTestEvent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-MicroorganismIdentificationLabTestEvent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-MicroorganismIdentificationLabTestEvent-.*$"))
                             }""" ] ;
    sh:targetClass sphn:MicroorganismIdentificationLabTestEvent .

constraints:sphnMicroorganismIdentificationLabTest_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-MicroorganismIdentificationLabTest-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-MicroorganismIdentificationLabTest-.*$"))
                             }""" ] ;
    sh:targetClass sphn:MicroorganismIdentificationLabTest .

constraints:sphnMicroorganismIdentificationResult a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:ReferenceRange ] [ sh:class sphn:ReferenceValue ] ) ;
            sh:path sphn:hasNumericalReference ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:373068000 ] [ sh:class snomed:52101004 ] [ sh:class snomed:2667000 ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTimeToPositivity ],
        [ sh:class sphn:Organism ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOrganism ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStringValue ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/373068000>, <http://snomed.info/id/52101004>, <http://snomed.info/id/2667000> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:MicroorganismIdentificationResult .

constraints:sphnMicroorganismIdentificationResult_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-MicroorganismIdentificationResult-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-MicroorganismIdentificationResult-.*$"))
                             }""" ] ;
    sh:targetClass sphn:MicroorganismIdentificationResult .

constraints:sphnNationality a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Country ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasAssociatedCountry ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:19535007 ] [ sh:class snomed:255396000 ] ) ;
            sh:path sphn:hasAcquistionCode ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasAcquistionCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasAcquistionCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/19535007>, <http://snomed.info/id/255396000> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:Nationality .

constraints:sphnNationality_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Nationality-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Nationality-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasAcquistionCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasAcquistionCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Nationality .

constraints:sphnNursingDiagnosis a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Code ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:Age ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectAge ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ] ;
    sh:targetClass sphn:NursingDiagnosis .

constraints:sphnNursingDiagnosis_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-NursingDiagnosis-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-NursingDiagnosis-.*$"))
                             }""" ] ;
    sh:targetClass sphn:NursingDiagnosis .

constraints:sphnNutritionIntake a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEnergyQuantity ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:926365009 ] [ sh:class snomed:289002003 ] [ sh:class snomed:268472006 ] [ sh:class snomed:926364008 ] [ sh:class snomed:169741004 ] ) ;
            sh:path sphn:hasModeCode ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:Substance ;
            sh:minCount 0 ;
            sh:path sphn:hasSubstance ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasModeCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasModeCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/926365009>, <http://snomed.info/id/289002003>, <http://snomed.info/id/268472006>, <http://snomed.info/id/926364008>, <http://snomed.info/id/169741004> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:NutritionIntake .

constraints:sphnNutritionIntake_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-NutritionIntake-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-NutritionIntake-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasModeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasModeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:NutritionIntake .

constraints:sphnOncologyDiagnosis a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:Age ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectAge ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasBodySite ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIncidenceDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:minCount 1 ;
            sh:or ( [ sh:class icd-10-gm:ICD-10-GM ] [ sh:class sphn:Code ] ) ;
            sh:path sphn:hasCode ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ] ;
    sh:targetClass sphn:OncologyDiagnosis .

constraints:sphnOncologyDiagnosis_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-OncologyDiagnosis-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-OncologyDiagnosis-.*$"))
                             }""" ] ;
    sh:targetClass sphn:OncologyDiagnosis .

constraints:sphnOncologySurgery a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Intent ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIntent ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:BodySite ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:OncologySurgery .

constraints:sphnOncologySurgery_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:OncologySurgery .

constraints:sphnOncologySurgery_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-OncologySurgery-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-OncologySurgery-.*$"))
                             }""" ] ;
    sh:targetClass sphn:OncologySurgery .

constraints:sphnOrganSupport a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasBodySite sphn:hasIntent ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:BodySite ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class snomed:80891009 ] [ sh:class snomed:10200004 ] [ sh:class snomed:64033007 ] [ sh:class snomed:39607008 ] ) ;
            sh:path ( sphn:hasBodySite sphn:hasCode ) ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:233573008 ] [ sh:class snomed:108241001 ] [ sh:class snomed:1222606000 ] [ sh:class snomed:232957001 ] [ sh:class snomed:1149092001 ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class snomed:399707004 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasIntent sphn:hasCode ) ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Intent ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIntent ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/399707004> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <https://biomedit.ch/rdf/sphn-schema/sphn#Intent> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:OrganSupport .

constraints:sphnOrganSupport_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-OrganSupport-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-OrganSupport-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this ("<https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>" as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasIntent>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this ("<https://biomedit.ch/rdf/sphn-schema/sphn#hasBodySite>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>" as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasBodySite>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:OrganSupport .

constraints:sphnOrganism a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:410607006 ] [ sh:class sphn:Code ] ) ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:Organism .

constraints:sphnOrganism_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Organism-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Organism-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Organism .

constraints:sphnOxygenSaturation a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasQuantity ) ;
    sh:property [ sh:class ucum:percent ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasQuantity sphn:hasUnit sphn:hasCode ) ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:TimeSeriesDataFile ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataFile ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ] ;
    sh:targetClass sphn:OxygenSaturation .

constraints:sphnOxygenSaturationMeasurement a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Implant ] [ sh:class sphn:MedicalDevice ] ) ;
            sh:path sphn:hasMedicalDevice ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:class snomed:128927009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMethodCode ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:OxygenSaturation ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasMedicalDevice, instances of sphn:AccessDevice, sphn:LabAnalyzer are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AccessDevice>, <https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>))
                         }""" ] ;
    sh:targetClass sphn:OxygenSaturationMeasurement .

constraints:sphnOxygenSaturationMeasurement_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-OxygenSaturationMeasurement-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-OxygenSaturationMeasurement-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:OxygenSaturationMeasurement .

constraints:sphnOxygenSaturation_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-OxygenSaturation-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-OxygenSaturation-.*$"))
                             }""" ] ;
    sh:targetClass sphn:OxygenSaturation .

constraints:sphnPerformer a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:14679004 ] [ sh:class snomed:125676002 ] ) ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:Performer .

constraints:sphnPerformer_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Performer-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Performer-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Performer .

constraints:sphnPharmaceuticalDoseForm a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class snomed:736542009 ] ) ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:PharmaceuticalDoseForm .

constraints:sphnPharmaceuticalDoseForm_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-PharmaceuticalDoseForm-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-PharmaceuticalDoseForm-.*$"))
                             }""" ] ;
    sh:targetClass sphn:PharmaceuticalDoseForm .

constraints:sphnPhysiologicState a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:128973006 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:PhysiologicState .

constraints:sphnPhysiologicState_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-PhysiologicState-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-PhysiologicState-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:PhysiologicState .

constraints:sphnProblemCondition a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOnsetDateTime ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStringValue ],
        [ sh:class snomed:307152002 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRelativeTemporalityCode ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:targetClass sphn:ProblemCondition .

constraints:sphnProblemCondition_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:ProblemCondition .

constraints:sphnProblemCondition_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasRelativeTemporalityCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasRelativeTemporalityCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ProblemCondition-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ProblemCondition-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ProblemCondition .

constraints:sphnProtein a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:Organism ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOrganism ] ;
    sh:targetClass sphn:Protein .

constraints:sphnProtein_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:Protein .

constraints:sphnProtein_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Protein-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Protein-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Protein .

constraints:sphnQualityControlMetric a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ] ;
    sh:targetClass sphn:QualityControlMetric .

constraints:sphnQualityControlMetric_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:QualityControlMetric .

constraints:sphnQualityControlMetric_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-QualityControlMetric-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-QualityControlMetric-.*$"))
                             }""" ] ;
    sh:targetClass sphn:QualityControlMetric .

constraints:sphnQuantity a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Comparator ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasComparator ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:datatype xsd:double ] [ sh:datatype xsd:string ] ) ;
            sh:path sphn:hasValue ],
        [ sh:class sphn:Unit ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasUnit ] ;
    sh:targetClass sphn:Quantity .

constraints:sphnQuantity_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Quantity-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Quantity-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Quantity .

constraints:sphnRadiotherapyProcedure a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasRadiationQuantity ) ;
    sh:property [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRadiationQuantity ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:Intent ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIntent ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:BodySite ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasFractionsNumber ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class ucum:Gy ] [ sh:class ucum:cGy ] [ sh:class ucum:MBq ] [ sh:class ucum:mCi ] ) ;
            sh:path ( sphn:hasRadiationQuantity sphn:hasUnit sphn:hasCode ) ],
        [ sh:minCount 1 ;
            sh:or ( [ sh:class snomed:78080008 ] [ sh:class snomed:152198000 ] [ sh:class snomed:33195004 ] [ sh:class snomed:115959002 ] [ sh:class snomed:168524008 ] [ sh:class snomed:74964007 ] [ sh:class snomed:399315003 ] [ sh:class snomed:395096001 ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/78080008>, <http://snomed.info/id/152198000>, <http://snomed.info/id/33195004>, <http://snomed.info/id/115959002>, <http://snomed.info/id/168524008>, <http://snomed.info/id/74964007>, <http://snomed.info/id/399315003>, <http://snomed.info/id/395096001> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:RadiotherapyProcedure .

constraints:sphnRadiotherapyProcedure_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-RadiotherapyProcedure-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-RadiotherapyProcedure-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:RadiotherapyProcedure .

constraints:sphnReferenceInterpretation a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:CardiacOutput ] [ sh:class sphn:BodyHeight ] [ sh:class sphn:LabResult ] [ sh:class sphn:Circumference ] [ sh:class sphn:OxygenSaturation ] [ sh:class sphn:BodyWeight ] [ sh:class sphn:ReferenceInterpretationResult ] [ sh:class sphn:RespiratoryRate ] [ sh:class sphn:TumorStageAssessmentResult ] [ sh:class sphn:BloodPressure ] [ sh:class sphn:Result ] [ sh:class sphn:AssessmentResult ] [ sh:class sphn:BodyTemperature ] [ sh:class sphn:HeartRate ] ) ;
            sh:path sphn:hasInput ],
        [ sh:class sphn:ReferenceInterpretationResult ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasOutput ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:string ;
            sh:minCount 0 ;
            sh:path sphn:hasStandardGuideline ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasInput, instances of sphn:TumorGradeAssessmentResult, sphn:TumorStageAssessmentResult, sphn:VitalStatus are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasInput> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasInput>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TumorGradeAssessmentResult>, <https://biomedit.ch/rdf/sphn-schema/sphn#TumorStageAssessmentResult>, <https://biomedit.ch/rdf/sphn-schema/sphn#VitalStatus>))
                         }""" ] ;
    sh:targetClass sphn:ReferenceInterpretation .

constraints:sphnReferenceInterpretationResult a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:260245000 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:ReferenceInterpretationResult .

constraints:sphnReferenceInterpretationResult_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ReferenceInterpretationResult-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ReferenceInterpretationResult-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ReferenceInterpretationResult .

constraints:sphnReferenceInterpretation_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ReferenceInterpretation-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ReferenceInterpretation-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ReferenceInterpretation .

constraints:sphnReferenceRange a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasLowerLimit ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasUpperLimit ] ;
    sh:targetClass sphn:ReferenceRange .

constraints:sphnReferenceRange_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ReferenceRange-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ReferenceRange-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ReferenceRange .

constraints:sphnReferenceSequence a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:ReferenceSequence .

constraints:sphnReferenceSequence_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:ReferenceSequence .

constraints:sphnReferenceSequence_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ReferenceSequence-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ReferenceSequence-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ReferenceSequence .

constraints:sphnReferenceValue a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasQuantity ] ;
    sh:targetClass sphn:ReferenceValue .

constraints:sphnReferenceValue_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ReferenceValue-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ReferenceValue-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ReferenceValue .

constraints:sphnRespiratoryRate a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasDataDetermination ) ;
    sh:property [ sh:class sphn:DataDetermination ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataDetermination ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:258104002 ] [ sh:class snomed:263760002 ] [ sh:class snomed:87982008 ] [ sh:class snomed:258090004 ] ) ;
            sh:path ( sphn:hasDataDetermination sphn:hasMethodCode ) ],
        [ sh:class sphn:TimeSeriesDataFile ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataFile ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasDataDetermination> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDataDetermination>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <https://biomedit.ch/rdf/sphn-schema/sphn#DataDetermination> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasDataDetermination>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDataDetermination>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/258104002>, <http://snomed.info/id/263760002>, <http://snomed.info/id/87982008>, <http://snomed.info/id/258090004> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:RespiratoryRate .

constraints:sphnRespiratoryRateMeasurement a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:MedicalDevice ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMedicalDevice ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class snomed:128927009 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMethodCode ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:class sphn:RespiratoryRate ;
            sh:minCount 1 ;
            sh:path sphn:hasResult ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasMedicalDevice, instances of sphn:AccessDevice, sphn:LabAnalyzer, sphn:Implant are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMedicalDevice>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#AccessDevice>, <https://biomedit.ch/rdf/sphn-schema/sphn#LabAnalyzer>, <https://biomedit.ch/rdf/sphn-schema/sphn#Implant>))
                         }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:RespiratoryRateMeasurement .

constraints:sphnRespiratoryRateMeasurement_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-RespiratoryRateMeasurement-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-RespiratoryRateMeasurement-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:RespiratoryRateMeasurement .

constraints:sphnRespiratoryRate_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this ("<https://biomedit.ch/rdf/sphn-schema/sphn#hasDataDetermination>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode>" as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDataDetermination>/<https://biomedit.ch/rdf/sphn-schema/sphn#hasMethodCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-RespiratoryRate-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-RespiratoryRate-.*$"))
                             }""" ] ;
    sh:targetClass sphn:RespiratoryRate .

constraints:sphnResuscitationDirective a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ],
        [ sh:class snomed:365870005 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:ResuscitationDirective .

constraints:sphnResuscitationDirective_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-ResuscitationDirective-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-ResuscitationDirective-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:ResuscitationDirective .

constraints:sphnSample a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Sample_fixationType ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasFixationType ],
        [ sh:class sphn:Sample_primaryContainer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPrimaryContainer ],
        [ sh:class snomed:123038009 ;
            sh:minCount 0 ;
            sh:path sphn:hasMaterialTypeCode ],
        [ sh:datatype xsd:anyURI ;
            sh:path sphn:hasSharedIdentifier ],
        [ sh:datatype xsd:string ;
            sh:minCount 0 ;
            sh:path sphn:hasIdentifier ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCollectionDateTime ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Sample> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Sample> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Sample> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Sample> .
                    }
                }""" ] .

constraints:sphnSampleProcessing a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:QualityControlMetric ;
            sh:minCount 0 ;
            sh:path sphn:hasQualityControlMetric ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Sample ] [ sh:class sphn:Isolate ] [ sh:class sphn:TumorSpecimen ] ) ;
            sh:path sphn:hasInput ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:SampleProcessing ] [ sh:class sphn:LibraryPreparation ] ) ;
            sh:path sphn:hasPredecessor ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AdministrativeCase ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:StandardOperatingProcedure ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStandardOperatingProcedure ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Sample ] [ sh:class sphn:Isolate ] ) ;
            sh:path sphn:hasOutput ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasOutput, instances of sphn:TumorSpecimen are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasOutput> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasOutput>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TumorSpecimen>))
                         }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> .
                    }
                }""" ] .

constraints:sphnSampleProcessing_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> .
                    }
                }""" ] .

constraints:sphnSampleProcessing_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-SampleProcessing-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-SampleProcessing-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#SampleProcessing> .
                    }
                }""" ] .

constraints:sphnSample_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Sample-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Sample-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMaterialTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMaterialTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:target [ a sh:SPARQLTarget ;
            sh:select """SELECT ?this
                WHERE {
                ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Sample> .
                MINUS {
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <https://biomedit.ch/rdf/sphn-schema/sphn#Sample> .
                    ?this <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?other_type .
                    FILTER (?other_type != <https://biomedit.ch/rdf/sphn-schema/sphn#Sample> )
                    ?this <http://www.w3.org/2000/01/rdf-schema#subClassOf>+  <https://biomedit.ch/rdf/sphn-schema/sphn#Sample> .
                    }
                }""" ] .

constraints:sphnSample_fixationType a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:OptimumCuttingTemperatureMedium sphn-individual:SnapFreezing sphn-individual:AldehydeBased sphn-individual:NonbufferedFormalin sphn-individual:Other sphn-individual:HeatStabilization sphn-individual:RNALater sphn-individual:PAXgeneTissue sphn-individual:NonaldehydeBasedWithoutAceticAcid sphn-individual:VacuumTechnologyStabilization sphn-individual:NeutralBufferedFormalin sphn-individual:AlcoholBased sphn-individual:NonaldehydeWithAceticAcid sphn-individual:AllprotectTissueReagent ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:Sample_fixationType .

constraints:sphnSample_primaryContainer a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:CitratePhosphateDextrose sphn-individual:ChemicalAdditivesStabilizers sphn-individual:ProteaseInhibitors sphn-individual:PolyethyleneTubeSterile sphn-individual:PAXgeneBloodRNAplus sphn-individual:SerumSeparatorTubeWithClotActivator sphn-individual:Other sphn-individual:LithiumHeparinAndRubberPlug sphn-individual:OrageneCollectionContainerOrEquivalent sphn-individual:PAXgeneBloodDNA sphn-individual:RNALater sphn-individual:TempusTube sphn-individual:StoolCollectionContainerWithDNAStabilizer sphn-individual:TraceElementsTube sphn-individual:AcidCitrateDextrose sphn-individual:LithiumHeparin sphn-individual:SodiumFluoridePotassiumOxalate sphn-individual:S8820ProteaseInhibitorTabletsOrEquivalent sphn-individual:Glass sphn-individual:CellPreparationTubeHeparin sphn-individual:SodiumEDTA sphn-individual:Hirudin sphn-individual:LithiumHeparinAndGel sphn-individual:PhysicalFiltrationSystem sphn-individual:PAXgeneBoneMarrowRNA sphn-individual:EDTAAndGel sphn-individual:SodiumCitrate sphn-individual:SerumTubeWithoutClotActivator sphn-individual:PolypropyleneTubeSterile sphn-individual:PotassiumEDTA sphn-individual:NonAldehydeBasedStabilizerForCellFreeNucleicAcids sphn-individual:AldehydeBasedStabilizerForCTCs sphn-individual:SodiumHeparin sphn-individual:CellPreparationTubeCitrate ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:Sample_primaryContainer .

constraints:sphnSemanticMapping a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class eco:0000217 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMethodCode ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:SourceData ;
            sh:minCount 0 ;
            sh:path sphn:hasSourceData ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasOutputCode ],
        [ sh:class sphn:SemanticMapping_purpose ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPurpose ] ;
    sh:targetClass sphn:SemanticMapping .

constraints:sphnSemanticMapping_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasOutputCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasOutputCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasOutputCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasOutputCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:SemanticMapping .

constraints:sphnSemanticMapping_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-SemanticMapping-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-SemanticMapping-.*$"))
                             }""" ] ;
    sh:targetClass sphn:SemanticMapping .

constraints:sphnSemanticMapping_purpose a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:Billing sphn-individual:PatientCare sphn-individual:Research sphn-individual:QualityControl ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:SemanticMapping_purpose .

constraints:sphnSequencingAnalysis a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class edam:operation_2945 ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:minCount 1 ;
            sh:or ( [ sh:class sphn:DataFile ] [ sh:class sphn:TimeSeriesDataFile ] ) ;
            sh:path sphn:hasOutput ],
        [ sh:class sphn:StandardOperatingProcedure ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStandardOperatingProcedure ],
        [ sh:class sphn:AdministrativeCase ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:DataProcessing ] [ sh:class sphn:Assay ] ) ;
            sh:path sphn:hasPredecessor ],
        [ sh:class sphn:Software ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSoftware ],
        [ sh:class sphn:QualityControlMetric ;
            sh:minCount 0 ;
            sh:path sphn:hasQualityControlMetric ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:DataFile ] [ sh:class sphn:TimeSeriesDataFile ] ) ;
            sh:path sphn:hasInput ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:ReferenceSequence ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasReferenceSequence ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ] ;
    sh:targetClass sphn:SequencingAnalysis .

constraints:sphnSequencingAnalysis_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:SequencingAnalysis .

constraints:sphnSequencingAnalysis_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-SequencingAnalysis-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-SequencingAnalysis-.*$"))
                             }""" ] ;
    sh:targetClass sphn:SequencingAnalysis .

constraints:sphnSequencingAssay a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataFile ;
            sh:minCount 0 ;
            sh:path sphn:hasDataFile ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class obi:0000070 ] [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] [ sh:class efo:0001455 ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:Sample ;
            sh:minCount 0 ;
            sh:path sphn:hasSample ],
        [ sh:class sphn:AdministrativeCase ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:minCount 0 ;
            sh:or ( [ sh:class sphn:SampleProcessing ] [ sh:class sphn:LibraryPreparation ] ) ;
            sh:path sphn:hasPredecessor ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:StandardOperatingProcedure ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStandardOperatingProcedure ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIntendedReadDepth ],
        [ sh:class sphn:SequencingRun ;
            sh:minCount 0 ;
            sh:path sphn:hasSequencingRun ],
        [ sh:class sphn:SequencingInstrument ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasSequencingInstrument ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIntendedReadLength ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIdentifier ],
        [ sh:class sphn:LibraryPreparation ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasLibraryPreparation ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasSample, instances of sphn:TumorSpecimen, sphn:Isolate are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasSample> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasSample>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TumorSpecimen>, <https://biomedit.ch/rdf/sphn-schema/sphn#Isolate>))
                         }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasDataFile, instances of sphn:TimeSeriesDataFile are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasDataFile> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDataFile>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TimeSeriesDataFile>))
                         }""" ] ;
    sh:targetClass sphn:SequencingAssay .

constraints:sphnSequencingAssay_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:SequencingAssay .

constraints:sphnSequencingAssay_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-SequencingAssay-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-SequencingAssay-.*$"))
                             }""" ] ;
    sh:targetClass sphn:SequencingAssay .

constraints:sphnSequencingInstrument a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class efo:0003739 ] [ sh:class sphn:Terminology ] [ sh:class sphn:Code ] [ sh:class obi:0400103 ] ) ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:SequencingInstrument .

constraints:sphnSequencingInstrument_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:SequencingInstrument .

constraints:sphnSequencingInstrument_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-SequencingInstrument-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-SequencingInstrument-.*$"))
                             }""" ] ;
    sh:targetClass sphn:SequencingInstrument .

constraints:sphnSequencingRun a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAverageReadLength ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAverageInsertSize ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasMeanReadDepth ],
        [ sh:class sphn:QualityControlMetric ;
            sh:minCount 1 ;
            sh:path sphn:hasQualityControlMetric ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasReadCount ],
        [ sh:class sphn:DataFile ;
            sh:minCount 1 ;
            sh:path sphn:hasDataFile ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasIdentifier ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasDataFile, instances of sphn:TimeSeriesDataFile are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasDataFile> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDataFile>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TimeSeriesDataFile>))
                         }""" ] ;
    sh:targetClass sphn:SequencingRun .

constraints:sphnSequencingRun_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-SequencingRun-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-SequencingRun-.*$"))
                             }""" ] ;
    sh:targetClass sphn:SequencingRun .

constraints:sphnSingleNucleotideVariation a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasReferenceAllele ],
        [ sh:class sphn:GenomicPosition ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasGenomicPosition ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasAlternateAllele ],
        [ sh:class sphn:ChromosomalLocation ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasChromosomalLocation ] ;
    sh:targetClass sphn:SingleNucleotideVariation .

constraints:sphnSingleNucleotideVariation_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-SingleNucleotideVariation-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-SingleNucleotideVariation-.*$"))
                             }""" ] ;
    sh:targetClass sphn:SingleNucleotideVariation .

constraints:sphnSoftware a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasVersion ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasUniformResourceLocator ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDescription ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasName ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:targetClass sphn:Software .

constraints:sphnSoftware_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Software-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Software-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Software .

constraints:sphnSourceData a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStringValue ] ;
    sh:targetClass sphn:SourceData .

constraints:sphnSourceData_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:SourceData .

constraints:sphnSourceData_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-SourceData-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-SourceData-.*$"))
                             }""" ] ;
    sh:targetClass sphn:SourceData .

constraints:sphnSourceSystem a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasName ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem_category ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCategory ],
        [ sh:class sphn:HealthcarePrimaryInformationSystem ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPrimarySystem ],
        [ sh:class sphn:SourceSystem_purpose ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPurpose ] ;
    sh:targetClass sphn:SourceSystem .

constraints:sphnSourceSystem_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-SourceSystem-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-SourceSystem-.*$"))
                             }""" ] ;
    sh:targetClass sphn:SourceSystem .

constraints:sphnSourceSystem_category a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:DataRepository sphn-individual:HealthcareInformationSystem sphn-individual:CaseReportForm sphn-individual:Cohort sphn-individual:ResearchLaboratory sphn-individual:ClinicalRegistry sphn-individual:OMICSFacility sphn-individual:ClinicalDataPlatform sphn-individual:Biobank ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:SourceSystem_category .

constraints:sphnSourceSystem_purpose a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:Billing sphn-individual:PatientCare sphn-individual:Research sphn-individual:QualityControl ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:SourceSystem_purpose .

constraints:sphnStandardOperatingProcedure a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:DataFile ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDataFile ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasVersion ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDescription ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasName ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "For sphn:hasDataFile, instances of sphn:TimeSeriesDataFile are not allowed" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasDataFile> as ?path) (?class as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDataFile>/rdf:type ?class.
                             FILTER(?class IN (<https://biomedit.ch/rdf/sphn-schema/sphn#TimeSeriesDataFile>))
                         }""" ] ;
    sh:targetClass sphn:StandardOperatingProcedure .

constraints:sphnStandardOperatingProcedure_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-StandardOperatingProcedure-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-StandardOperatingProcedure-.*$"))
                             }""" ] ;
    sh:targetClass sphn:StandardOperatingProcedure .

constraints:sphnSubjectPseudoIdentifier a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:anyURI ;
            sh:path sphn:hasSharedIdentifier ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasIdentifier ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:targetClass sphn:SubjectPseudoIdentifier .

constraints:sphnSubjectPseudoIdentifier_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-SubjectPseudoIdentifier-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-SubjectPseudoIdentifier-.*$"))
                             }""" ] ;
    sh:targetClass sphn:SubjectPseudoIdentifier .

constraints:sphnSubstance a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasGenericName ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] [ sh:class snomed:105590001 ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ] ;
    sh:targetClass sphn:Substance .

constraints:sphnSubstance_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:Substance .

constraints:sphnSubstance_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Substance-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Substance-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Substance .

constraints:sphnSwissSocioEconomicPosition a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasDistance ) ;
    sh:property [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDistance ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:datatype xsd:double ] [ sh:datatype xsd:string ] ) ;
            sh:path sphn:hasValue ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasVersion ],
        [ sh:class ucum:m ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasDistance sphn:hasUnit sphn:hasCode ) ] ;
    sh:targetClass sphn:SwissSocioEconomicPosition .

constraints:sphnSwissSocioEconomicPosition_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-SwissSocioEconomicPosition-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-SwissSocioEconomicPosition-.*$"))
                             }""" ] ;
    sh:targetClass sphn:SwissSocioEconomicPosition .

constraints:sphnTherapeuticArea a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:TherapeuticArea_specialtyName ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSpecialtyName ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ] ;
    sh:targetClass sphn:TherapeuticArea .

constraints:sphnTherapeuticArea_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TherapeuticArea-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TherapeuticArea-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TherapeuticArea .

constraints:sphnTherapeuticArea_specialtyName a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type rdfs:label ) ;
    sh:property [ sh:in ( sphn-individual:MedicalGenetics sphn-individual:Radiology sphn-individual:PreventionAndPublicHealth sphn-individual:NuclearMedicine sphn-individual:OralAndMaxillofacialSurgery sphn-individual:HospitalPharmacy sphn-individual:ForensicMedicine sphn-individual:MedicalOncology sphn-individual:ClinicalPharmacologyAndToxicology sphn-individual:GeneralMedicalPractitioner sphn-individual:Urology sphn-individual:Nephrology sphn-individual:IntensiveCareMedicine sphn-individual:Gastroenterology sphn-individual:Ophthalmology sphn-individual:Paediatrics sphn-individual:Surgery sphn-individual:HealthPsychology sphn-individual:Anaesthesiology sphn-individual:Other sphn-individual:VascularSurgery sphn-individual:OccupationalMedicine sphn-individual:Rheumatology sphn-individual:GeneralInternalMedicine sphn-individual:OralSurgery sphn-individual:DermatologyAndVenereology sphn-individual:Infectology sphn-individual:PsychiatryAndPsychotherapy sphn-individual:Neurology sphn-individual:ThoracicSurgery sphn-individual:PaediatricSurgery sphn-individual:PlasticReconstructiveAndAestheticSurgery sphn-individual:GeneralMedicine sphn-individual:Periodontics sphn-individual:ChildAndAdolescentPsychiatryAndPsychotherapy sphn-individual:GynaecologyAndObstetrics sphn-individual:CardiacAndThoracicVascularSurgery sphn-individual:Orthodontics sphn-individual:AddictionMedicine sphn-individual:Psychotherapy sphn-individual:EndocrinologyAndDiabetology sphn-individual:RadioOncologyAndRadiotherapy sphn-individual:Pneumology sphn-individual:ChildAndAdolescentPsychology sphn-individual:ClinicalPsychology sphn-individual:HandSurgery sphn-individual:GeriatricMedicine sphn-individual:CommunityPharmacy sphn-individual:Pathology sphn-individual:Neuropsychology sphn-individual:OrthopaedicSurgeryAndTraumatologyOfTheLocomotorApparatus sphn-individual:Neurosurgery sphn-individual:ReconstructiveDentistry sphn-individual:InternalMedicine sphn-individual:Angiology sphn-individual:TropicalAndTravelMedicine sphn-individual:PhysicalMedicineAndRehabilitation sphn-individual:Haematology sphn-individual:ChiropracticSpecialist sphn-individual:VisceralMedicine sphn-individual:PharmaceuticalMedicine sphn-individual:Cardiology sphn-individual:Otorhinolaryngology sphn-individual:AllergologyAndClinicalImmunology ) ;
            sh:path [ sh:inversePath rdf:type ] ] ;
    sh:targetClass sphn:TherapeuticArea_specialtyName .

constraints:sphnTimePattern a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:385432009 ] [ sh:class snomed:7087005 ] [ sh:class snomed:255238004 ] ) ;
            sh:path sphn:hasTypeCode ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/385432009>, <http://snomed.info/id/7087005>, <http://snomed.info/id/255238004> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:TimePattern .

constraints:sphnTimePattern_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TimePattern-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TimePattern-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TimePattern .

constraints:sphnTimeSeriesDataFile a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasEntryCount ) ;
    sh:property [ sh:class edam:format_1915 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasFormatCode ],
        [ sh:class sphn:Hash ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasHash ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasName ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCreationDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:DataFile_encoding ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasEncoding ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasUniformResourceIdentifier ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasEntryCount ],
        [ sh:class ucum:cblnbcbr ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path ( sphn:hasEntryCount sphn:hasUnit sphn:hasCode ) ] ;
    sh:targetClass sphn:TimeSeriesDataFile .

constraints:sphnTimeSeriesDataFile_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TimeSeriesDataFile-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TimeSeriesDataFile-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TimeSeriesDataFile .

constraints:sphnTobaccoExposure a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasQuantity sphn:hasDuration ) ;
    sh:property [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:35361000087100 ] [ sh:class snomed:81703003 ] [ sh:class snomed:228494002 ] [ sh:class snomed:228493008 ] [ sh:class snomed:8517006 ] [ sh:class snomed:722499006 ] [ sh:class snomed:77176002 ] [ sh:class snomed:228513009 ] [ sh:class snomed:43381005 ] [ sh:class snomed:702979003 ] ) ;
            sh:path sphn:hasTypeCode ],
        [ sh:class snomed:138875005 ;
            sh:minCount 0 ;
            sh:path sphn:hasRouteCode ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class snomed:39953003 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAgentCode ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:1255665007 ] [ sh:class snomed:62482003 ] [ sh:class snomed:75540009 ] ) ;
            sh:path sphn:hasDegreeCode ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDuration ],
        [ sh:class ucum:a ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasDuration sphn:hasUnit sphn:hasCode ) ],
        [ sh:class ucum:a ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasQuantity sphn:hasUnit sphn:hasCode ) ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/35361000087100>, <http://snomed.info/id/81703003>, <http://snomed.info/id/228494002>, <http://snomed.info/id/228493008>, <http://snomed.info/id/8517006>, <http://snomed.info/id/722499006>, <http://snomed.info/id/77176002>, <http://snomed.info/id/228513009>, <http://snomed.info/id/43381005>, <http://snomed.info/id/702979003> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasDegreeCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDegreeCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/1255665007>, <http://snomed.info/id/62482003>, <http://snomed.info/id/75540009> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:TobaccoExposure .

constraints:sphnTobaccoExposure_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasAgentCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasAgentCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasRouteCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasRouteCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasDegreeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasDegreeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TobaccoExposure-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TobaccoExposure-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TobaccoExposure .

constraints:sphnTranscript a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:Organism ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasOrganism ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:Protein ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasProtein ] ;
    sh:targetClass sphn:Transcript .

constraints:sphnTranscript_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:Transcript .

constraints:sphnTranscript_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Transcript-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Transcript-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Transcript .

constraints:sphnTransplant a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:15879007 ] [ sh:class snomed:7970006 ] ) ;
            sh:path sphn:hasGraftTypeCode ],
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:class snomed:414265000 ] [ sh:class snomed:260667007 ] ) ;
            sh:path sphn:hasCode ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasGraftTypeCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasGraftTypeCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/15879007>, <http://snomed.info/id/7970006> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:Transplant .

constraints:sphnTransplantPresence a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStartDateTime ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasRecordDateTime ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasEndDateTime ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:Transplant ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasTransplant ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Invalid time frame between sphn:hasStartDateTime and sphn:hasEndDateTime" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> as ?path) (?hasStartDateTime as ?value)
                    WHERE {
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasStartDateTime> ?hasStartDateTime .
                        ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasEndDateTime> ?hasEndDateTime .
                        FILTER (?hasStartDateTime > ?hasEndDateTime)
                    }""" ] ;
    sh:targetClass sphn:TransplantPresence .

constraints:sphnTransplantPresence_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TransplantPresence-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TransplantPresence-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TransplantPresence .

constraints:sphnTransplant_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasGraftTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasGraftTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Transplant-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Transplant-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Transplant .

constraints:sphnTumorGradeAssessment a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:TumorGradeAssessmentResult ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasResult ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasName ],
        [ sh:class sphn:AssessmentComponent ;
            sh:minCount 0 ;
            sh:path sphn:hasComponent ],
        [ sh:class snomed:277457005 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:TumorGradeAssessment .

constraints:sphnTumorGradeAssessmentEvent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:TumorGradeAssessment ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasAssessment ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ] ;
    sh:targetClass sphn:TumorGradeAssessmentEvent .

constraints:sphnTumorGradeAssessmentEvent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TumorGradeAssessmentEvent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TumorGradeAssessmentEvent-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TumorGradeAssessmentEvent .

constraints:sphnTumorGradeAssessmentResult a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:138875005 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCode ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStringValue ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ] ;
    sh:targetClass sphn:TumorGradeAssessmentResult .

constraints:sphnTumorGradeAssessmentResult_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TumorGradeAssessmentResult-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TumorGradeAssessmentResult-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TumorGradeAssessmentResult .

constraints:sphnTumorGradeAssessment_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TumorGradeAssessment-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TumorGradeAssessment-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TumorGradeAssessment .

constraints:sphnTumorSpecimen a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type sphn:hasTumorPurity ) ;
    sh:property [ sh:class snomed:123038009 ;
            sh:minCount 0 ;
            sh:path sphn:hasMaterialTypeCode ],
        [ sh:class sphn:Sample_fixationType ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasFixationType ],
        [ sh:datatype xsd:anyURI ;
            sh:path sphn:hasSharedIdentifier ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:datatype xsd:string ;
            sh:minCount 0 ;
            sh:path sphn:hasIdentifier ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTumorPurity ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:Sample_primaryContainer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPrimaryContainer ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCollectionDateTime ],
        [ sh:class sphn:BodySite ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasBodySite ],
        [ sh:class ucum:percent ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path ( sphn:hasTumorPurity sphn:hasUnit sphn:hasCode ) ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ] ;
    sh:targetClass sphn:TumorSpecimen .

constraints:sphnTumorSpecimen_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasMaterialTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasMaterialTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TumorSpecimen-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TumorSpecimen-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TumorSpecimen .

constraints:sphnTumorStageAssessment a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:AssessmentComponent ;
            sh:minCount 0 ;
            sh:path sphn:hasComponent ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasName ],
        [ sh:class sphn:TumorStageAssessmentResult ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasResult ],
        [ sh:class snomed:254292007 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:TumorStageAssessment .

constraints:sphnTumorStageAssessmentEvent a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:TumorStageAssessment ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasAssessment ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:Performer ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasPerformer ],
        [ sh:class sphn:AdministrativeCase ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDateTime ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ] ;
    sh:targetClass sphn:TumorStageAssessmentEvent .

constraints:sphnTumorStageAssessmentEvent_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TumorStageAssessmentEvent-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TumorStageAssessmentEvent-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TumorStageAssessmentEvent .

constraints:sphnTumorStageAssessmentResult a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class snomed:138875005 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:Quantity ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasQuantity ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasStringValue ] ;
    sh:targetClass sphn:TumorStageAssessmentResult .

constraints:sphnTumorStageAssessmentResult_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TumorStageAssessmentResult-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TumorStageAssessmentResult-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TumorStageAssessmentResult .

constraints:sphnTumorStageAssessment_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-TumorStageAssessment-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-TumorStageAssessment-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:TumorStageAssessment .

constraints:sphnUnit a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class ucum:UCUM ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCode ] ;
    sh:targetClass sphn:Unit .

constraints:sphnUnit_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Unit-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-Unit-.*$"))
                             }""" ] ;
    sh:targetClass sphn:Unit .

constraints:sphnVariantDescriptor a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:GenomicInsertion ] [ sh:class sphn:GeneticVariation ] [ sh:class sphn:GenomicDeletion ] [ sh:class sphn:CopyNumberVariation ] [ sh:class sphn:SingleNucleotideVariation ] ) ;
            sh:path sphn:hasGeneticVariation ],
        [ sh:class geno:0000877 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasAlleleOriginCode ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:class sphn:AdministrativeCase ;
            sh:minCount 0 ;
            sh:path sphn:hasAdministrativeCase ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class sphn:Code ] [ sh:class sphn:Terminology ] ) ;
            sh:path sphn:hasCode ],
        [ sh:class sphn:DataProvider ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:Gene ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasGene ],
        [ sh:class geno:0000133 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasZygosityCode ],
        [ sh:class so:0001059 ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasTypeCode ],
        [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:minCount 0 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:VariantNotation ;
            sh:minCount 0 ;
            sh:path sphn:hasNotation ] ;
    sh:targetClass sphn:VariantDescriptor .

constraints:sphnVariantDescriptor_Warning_Codes a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasAlleleOriginCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasAlleleOriginCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasAlleleOriginCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasAlleleOriginCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Deprecated unversioned code" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#>
            PREFIX sphn-loinc: <https://biomedit.ch/rdf/sphn-resource/loinc/>
            PREFIX sphn-hgnc: <https://biomedit.ch/rdf/sphn-resource/hgnc/>
            SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasZygosityCode> as ?path) (?typeCode as ?value)
            WHERE {
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasZygosityCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-loinc:LOINC .
                ?typeCode rdfs:label ?label .
                FILTER(STRSTARTS(lcase(STR(?label)), "deprecated"))
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasZygosityCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                {
                    SELECT ?typeCode
                    WHERE {
                        ?typeCode rdf:type ?codeType .
                        FILTER(STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/GENO_") || STRSTARTS(STR(?typeCode), "http://purl.obolibrary.org/obo/SO_"))
                    }
                }
                ?typeCode owl:deprecated ?isDeprecated .
                FILTER(?isDeprecated)
            }
            UNION
            {
                ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasZygosityCode> ?oldCode .
                ?oldCode rdf:type ?typeCode .
                ?typeCode rdfs:subClassOf+ sphn-hgnc:HGNC .
                ?typeCode rdfs:comment ?comment .
                FILTER(lcase(STR(?comment))="entry withdrawn" || lcase(STR(?comment))="symbol withdrawn")
            }
            }""" ] ;
    sh:targetClass sphn:VariantDescriptor .

constraints:sphnVariantDescriptor_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-VariantDescriptor-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-VariantDescriptor-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasZygosityCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasZygosityCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasTypeCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasAlleleOriginCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasAlleleOriginCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ] ;
    sh:targetClass sphn:VariantDescriptor .

constraints:sphnVariantNotation a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:or ( [ sh:datatype xsd:double ] [ sh:datatype xsd:string ] ) ;
            sh:path sphn:hasValue ],
        [ sh:datatype xsd:string ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasCodingSystemAndVersion ] ;
    sh:targetClass sphn:VariantNotation .

constraints:sphnVariantNotation_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-VariantNotation-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-VariantNotation-.*$"))
                             }""" ] ;
    sh:targetClass sphn:VariantNotation .

constraints:sphnVitalStatus a sh:NodeShape ;
    sh:closed false ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class sphn:SubjectPseudoIdentifier ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasSubjectPseudoIdentifier ],
        [ sh:class sphn:Death ;
            sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:path sphn:hasDeath ],
        [ sh:class sphn:DataProvider ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path sphn:hasDataProvider ],
        [ sh:class sphn:SourceSystem ;
            sh:minCount 1 ;
            sh:path sphn:hasSourceSystem ],
        [ sh:maxCount 1 ;
            sh:minCount 0 ;
            sh:or ( [ sh:class snomed:438949009 ] [ sh:class snomed:399307001 ] ) ;
            sh:path sphn:hasCode ] ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "No descendents (all subclasses) of the specified codes are allowed" ;
            sh:select """SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?class as ?value)
                                                WHERE {
                                                    ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode>/<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?class .
                                                    FILTER( ?values IN ( <http://snomed.info/id/438949009>, <http://snomed.info/id/399307001> )) .
                                                    FILTER (?class NOT IN ( ?values ) ) .
                                                    FILTER NOT EXISTS { ?values <http://www.w3.org/2000/01/rdf-schema#subClassOf>+ ?class .}
                                                }""" ] ;
    sh:targetClass sphn:VitalStatus .

constraints:sphnVitalStatus_Warning_Naming a sh:NodeShape ;
    sh:severity sh:Warning ;
    sh:sparql [ a sh:SPARQLConstraint ;
            sh:message "Instantiated shared resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         SELECT ?this (<https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> as ?path) (?code as ?value)
                         WHERE {
                             ?this <https://biomedit.ch/rdf/sphn-schema/sphn#hasCode> ?code .
                             FILTER(!REGEX(STR(?code), "^https://biomedit.ch/rdf/sphn-resource/.*-Code-.*$"))
                             }""" ],
        [ a sh:SPARQLConstraint ;
            sh:message "Instantiated unique resource not matching naming convention '^https://biomedit.ch/rdf/sphn-resource/.*-VitalStatus-.*$'" ;
            sh:select """PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                         PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                         SELECT ?this (?class as ?path) (?this as ?value)
                         WHERE {
                             ?this rdf:type ?class .
                             FILTER(!REGEX(STR(?this), "^https://biomedit.ch/rdf/sphn-resource/.*-VitalStatus-.*$"))
                             }""" ] ;
    sh:targetClass sphn:VitalStatus .

